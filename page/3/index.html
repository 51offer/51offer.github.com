<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>51offer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="每周分享博客">
<meta property="og:type" content="website">
<meta property="og:title" content="51offer">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="51offer">
<meta property="og:description" content="每周分享博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="51offer">
<meta name="twitter:description" content="每周分享博客">
  
    <link rel="alternative" href="/atom.xml" title="51offer" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">移动组团队</a></h1>
		</hgroup>

		
		<p class="header-subtitle">MobileBlogs</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/51offer" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/p/1006062608078012/home" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="/ming.z@51offer.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/JUnit4/" style="font-size: 10px;">JUnit4</a> <a href="/tags/Playground/" style="font-size: 10px;">Playground</a> <a href="/tags/blog-tools-ci/" style="font-size: 10px;">blog, tools, ci</a> <a href="/tags/express/" style="font-size: 10px;">express</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/javaScript/" style="font-size: 10px;">javaScript</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/phython/" style="font-size: 10px;">phython</a> <a href="/tags/shell/" style="font-size: 20px;">shell</a> <a href="/tags/tablayout/" style="font-size: 10px;">tablayout</a> <a href="/tags/weui/" style="font-size: 10px;">weui</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/同步异步/" style="font-size: 10px;">同步异步</a> <a href="/tags/坑/" style="font-size: 10px;">坑</a> <a href="/tags/开发效率/" style="font-size: 10px;">开发效率</a> <a href="/tags/效率/" style="font-size: 10px;">效率</a> <a href="/tags/游戏/" style="font-size: 10px;">游戏</a> <a href="/tags/研发杂谈/" style="font-size: 10px;">研发杂谈</a> <a href="/tags/线程/" style="font-size: 10px;">线程</a> <a href="/tags/网站/" style="font-size: 10px;">网站</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.tomatopeter.com/">tomatopeter&#39;s blog&#39;</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://ioi.im/">ming.z&#39;s blog</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我们是一群爱折腾的技术宅，立志在留学行业做些好玩的事。如果你相信技术拥有强大的力量，有很多有趣的念头不知在何处能实践，不妨加入我们一起切磋。。。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">移动组团队</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">移动组团队</h1>
			</hgroup>
			
			<p class="header-subtitle">MobileBlogs</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/51offer" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/p/1006062608078012/home" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="/ming.z@51offer.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Why-Git-Learn-It" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/06/Why-Git-Learn-It/" class="article-date">
  	<time datetime="2016-01-06T16:00:00.000Z" itemprop="datePublished">2016-01-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/06/Why-Git-Learn-It/">Why Git? Learn It!</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="总览">总览</h2><ul>
<li>为什么要用 Git？</li>
<li>Git + SourceTree + Gitlab 的使用演示</li>
<li>提醒和推荐</li>
</ul>
<h2 id="为什么要用_Git？">为什么要用 Git？</h2><ul>
<li>一个工具、一套方案，解决源码管理的问题</li>
</ul>
<h3 id="对于版本控制，我们需要什么？">对于版本控制，我们需要什么？</h3><ul>
<li>代码历史追溯<ul>
<li>某一次提交的改动（SVN，Git）</li>
<li>某一个功能的改动过程（好的提交习惯更重要，在多人协作情况下提交历史更清晰）</li>
</ul>
</li>
<li>协同开发<ul>
<li>用分支来隔离上线与开发中的代码</li>
<li>多人多线并行开发：1 人对 N 线，N 人对 1 线都有可能</li>
</ul>
</li>
</ul>
<blockquote>
<p>秒极定律<br>一件事情如果能控制在 10s 内完成，人们就会极频繁的使用它。<br>举栗子：</p>
<ul>
<li>docker 被推崇，从虚拟机到 Vagrant 到 docker，碰到了秒级定律</li>
<li>持续集成，快速迭代</li>
</ul>
</blockquote>
<h3 id="秒级的代码管理？">秒级的代码管理？</h3><ul>
<li>本地代码飞快变化至任意历史提交记录：SVN 30s-2min；Git 秒级<ul>
<li>工作状态快速切换</li>
</ul>
</li>
<li>代码提交速度飞快：SVN 受限于网络速度；Git commit 秒级，push 受限于网络速度</li>
<li>代码创建、切换、合并分支飞快：SVN 速度慢，很麻烦；Git 赞！<ul>
<li>勇于原型探索，历史清晰，易调整方向，易新建，易弃用</li>
<li>与 code review 结合</li>
</ul>
</li>
</ul>
<h2 id="SVN_比_Git_好在哪里">SVN 比 Git 好在哪里</h2><ul>
<li>更简单，符合原有自主文件夹管理版本的心理预期<ul>
<li>Git 暴露概念过多，学习曲线陡峭，这点不如 hg</li>
</ul>
</li>
<li>SVN 有目录级的权限控制<ul>
<li>适合大中型中间件软件公司：目录划分权限，职能长期固定</li>
</ul>
</li>
<li>也许还有其它，我不清楚</li>
</ul>
<h3 id="Git_真实的影响力">Git 真实的影响力</h3><blockquote>
<p>I’m an egotistical bastard, and I name all my projects after myself. First Linux, now Git.<br>—— Linus</p>
</blockquote>
<ul>
<li>在 2016 问这个问题对互联网来说已是大势所趋<ul>
<li>npm + pip 均托管在 Github</li>
<li>OpenJDK 使用 Hg（Mercurial）</li>
<li>Github 早已一统开源天下，Java 概莫能外</li>
</ul>
</li>
<li>SVN 与 Git 二分天下，但 Git 占据的是互联网明星创业公司和 BAT 的优秀团队，为何？</li>
<li>会 Git 找工作是加分项</li>
<li>学习版本控制的另一种思维方式（学习一门语言就是学习一类思维方式）</li>
</ul>
<h2 id="一些问题">一些问题</h2><ul>
<li>Git 不能直接解决目前后端的开发环境<ul>
<li>code 规范的 branch 流程</li>
<li>依赖，理清 maven 依赖和配合方式</li>
<li>秒级上线（测试、预发布、正式）</li>
<li>相应（尽可能少人力介入的）自动化测试、监控</li>
</ul>
</li>
</ul>
<h2 id="Git_+_SourceTree_+_Gitlab_的使用演示">Git + SourceTree + Gitlab 的使用演示</h2><p><img src="http://7j1xgb.com5.z0.glb.clouddn.com/FullSizeRender.jpg" alt="Git 使用流程示意图"></p>
<h3 id="local_repo">local repo</h3><ul>
<li>用 SourceTree 初始化一个本地项目</li>
<li>小步提交，介绍 staged 的用法<ul>
<li>stage or unstage or discard</li>
<li>stage 某一行代码</li>
</ul>
</li>
<li>一次提交</li>
<li>介绍 master 分支及 branchs 界面<ul>
<li>留意 commit 编号</li>
</ul>
</li>
<li>创建一个分支 feature/login</li>
<li>新建 login.java 文件，index.html 加一行代码</li>
<li>commit，观察分支树变化</li>
<li>切换分支，观察代码变化</li>
<li>创建一个分支 feature/share</li>
<li>新建 share.py 文件，index.html 改一行代码</li>
<li>commit，观察分支树变化</li>
<li>切回 feature/login，临时处理事情，再切回 feature/share</li>
<li>feature/share 分支删几行代码，再提交一次</li>
<li>feature/share merge to master 分支，观察分支树变化</li>
<li>feature/login merge to master 分支，处理冲突</li>
<li>初始化 Git-flow</li>
<li>新建 feature/school 分支，commit once</li>
<li>用 Git-flow-gui 完成 feature/school 分支</li>
<li>留意刚才的所有提交都在本地，思考与 SVN 区别（很像，只是分支极灵活）</li>
<li>Q&amp;A</li>
</ul>
<h3 id="Gitlab">Gitlab</h3><ul>
<li>注册帐号，ssh-key 授权（略）</li>
<li>介绍 Gitlab 结构：team-project</li>
<li>新建项目 test-repo</li>
<li>留意空项目向导，复制代码库 url</li>
<li>本地配置 remote-url，观察 remotes 变化</li>
<li>push，注意是 push 多条分支，留意 local-remote 分支对应关系</li>
<li>再看 remotes 变化，分支树变化<ul>
<li>remotes branchs 与 local branchs 一致</li>
<li>分支树中多了 origin/*</li>
</ul>
</li>
<li>观察 Gitlab 界面变化</li>
<li>介绍 Gitlab 单个项目界面</li>
<li>Q&amp;A</li>
</ul>
<h3 id="来一次典型的开发过程（包含_code_review）">来一次典型的开发过程（包含 code review）</h3><ul>
<li>保证在 develop 分支，pull 最新代码</li>
<li>网页端提交 readme 文件，造成 origin 变化，介绍 fetch，注意 branchs 变化</li>
<li>重新 pull</li>
<li>用 Git-flow-gui 建立 feature/news 分支</li>
<li>产生两次 commit（包含 rename 文件）</li>
<li>留意分支树变化，注意 Gitlab-web 端不存在刚才的提交，push，再对比</li>
<li>Gitlab-web 端新建 merge-request, 留意 source-branch, target-branch, title, ass</li>
<li>被指派者 review 代码，web 端回复建议</li>
<li>根据建议产生新的 commit，同时 push</li>
<li>刷新 web 端观察变化：查看一次 commit，查看全部 changes</li>
<li>被指派者回复 LGTM（look good to me），点击 merge</li>
<li>回到 SourceTree，观察分支树变化，fetch 再看</li>
<li>切回 develop 分支</li>
<li>Q&amp;A<ul>
<li>有冲突 merge 按钮会不可点击，merge develop to work_branch ，在 develop 分支外解决冲突，commit&amp;push，merge 按钮就可点击了</li>
<li>可方便的与自动化测试等结合起来</li>
</ul>
</li>
</ul>
<h2 id="提醒和推荐">提醒和推荐</h2><h2 id="一些提醒（坑）">一些提醒（坑）</h2><ul>
<li>初次使用 Git，注意设置 <code>git config --global email&amp;name</code></li>
<li>Windows 下的 Git 使用的确有些不便（不过我不熟悉，也不清楚具体问题）</li>
<li>授权方式推荐 ssh-key</li>
<li>忽略文件的配置</li>
<li>着手代码前思考终极问题：『我在哪里，要去何处？』（先认清所在分支，pull）</li>
<li>commit 已经 push 到远端了，这个时候不要想着再去修改了</li>
<li>学习新东西，坑总是有的，多填了也就会了</li>
</ul>
<h3 id="一些推荐">一些推荐</h3><ul>
<li>强调思路，记住秒级定律，效率为王</li>
<li>小步提交，每小时至少提交一次<ul>
<li>一次任务的实现过程：整体设计，框架（类），接口，单元测试，实现</li>
</ul>
</li>
<li>完整提交，完整提交，必须完整提交！不该有任一个提交项目不可运行。</li>
<li>保证非工作期间，工作区间干净</li>
<li>不想提交但要切换分支处理事物用 stash 处理</li>
<li>Github 经常被 X<ul>
<li>coding.net 代码私有库托管可以用。找开源代码，永远是 Github</li>
<li>Google 也是被 X。珍爱生命，自配 VPN</li>
</ul>
</li>
<li>国内 Git 私有库托管推荐 coding.net，国外推荐 bitbucket（支持hg） 和 Gitlab</li>
</ul>
<h2 id="其它">其它</h2><ul>
<li>依赖（迷信）工具不可取，但工具会影响思维方式，而思维方式非常重要</li>
</ul>
<blockquote>
<p>举例：<br>SVN 的思维方式决定了 diff patch 的开源合作方式。交流不顺畅，实现思路难以程现，这种合作方式很长时间里都是高端人士的特权。<br>Git + Github 催生了 fork，成就了最大的程序员社交网站，也极力促进了开源社区的发展。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/技术部分享/">技术部分享</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-移动周分享-第41期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/25/移动周分享-第41期/" class="article-date">
  	<time datetime="2015-12-25T10:30:00.000Z" itemprop="datePublished">2015-12-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/25/移动周分享-第41期/">移动周分享-第41期</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Python_脚本入门知识">Python 脚本入门知识</h1><p>@(归纳中)</p>
<ul>
<li>如何写脚本<ul>
<li>和写程序一模一样….</li>
<li>所以我讲一些周边知识…</li>
</ul>
</li>
<li>virtualenv<ul>
<li>python沙盒</li>
<li>某些依赖2.7 有些依赖3.0</li>
<li>创建 ： virtualenv test_env</li>
<li>创建纯净的环境 ：virtualenv test_env —no-site-packages</li>
<li>启动 ：source ./bin/activate</li>
<li>关闭 ：deactivate</li>
</ul>
</li>
<li>setuptools<ul>
<li>打包</li>
<li>setup.py</li>
<li>python setup.py bdist_egg</li>
</ul>
</li>
<li>pip<ul>
<li>安装打包工具</li>
</ul>
</li>
<li>PyPI<ul>
<li>the Python Package Index : Python Package Index</li>
</ul>
</li>
</ul>
<h2 id="The_Bash_Shell_变量(初级)">The Bash Shell 变量(初级)</h2><p>@(Share)[shell]</p>
<p>[TOC]</p>
<h3 id="前言">前言</h3><p><code>我有一个想法，希望通过学习脚本来实现blog的自动创建及发布等操作，</code><br><code>zm推荐shell，pj建议js</code></p>
<h4 id="常见bash熟悉的特性：">常见bash熟悉的特性：</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#$：(关于本 shell 的 PID)</span></span><br><span class="line"><span class="comment">#钱字号本身也是个变量喔！这个咚咚代表的是『目前这个 Shell 的线程代号』，亦即是所谓的 PID (Process ID)。 更多的程序观念，我们会在第四篇的时候提及。想要知道我们的 shell 的 PID ，就可以用：『 echo $$ 』即可！出现的数字就是你的 PID 号码。</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$$</span></span><br><span class="line"><span class="number">10337</span></span><br><span class="line"><span class="comment">#?：(关于上个运行命令的回传值)</span></span><br><span class="line"><span class="comment">#问号也是一个特殊的变量？在 bash 里面这个变量可重要的很！ 这个变量是：『上一个运行的命令所回传的值』， 上面这句话的重点是『上一个命令』与『回传值』两个地方。当我们运行某些命令时， 这些命令都会回传一个运行后的代码。一般来说，如果成功的运行该命令， 则会回传一个 0 值，如果运行过程发生错误，就会回传『错误代码』才对！一般就是以非为 0 的数值来取代。</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo<span class="variable">$</span><br><span class="line"></span>-<span class="symbol">bash:</span> echo<span class="variable">$:</span> command <span class="keyword">not</span> found</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$?</span></span><br><span class="line"><span class="number">127</span>	<span class="comment"># &lt;== error</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$?</span></span><br><span class="line"><span class="number">0</span>	<span class="comment"># &lt;== success</span></span><br></pre></td></tr></table></figure>
<ul>
<li>命令编修能力 (history)：</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$HISTSIZE</span></span><br><span class="line"><span class="number">500</span></span><br></pre></td></tr></table></figure>
<ul>
<li>命令与文件补全功能： <blockquote>
<p> [tab] 按键的好处</p>
<ul>
<li>一下和两下的区别</li>
<li>命令与文件路径</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">XcodeYangdeMBP2:~ xcodeyang$ x</span><br><span class="line">xar              xcodebuild       xgettext5.<span class="number">18</span><span class="class">.pl</span>  xmllint          xslt-config</span><br><span class="line">xargs            xcodeproj        xip              xpath            xsltproc</span><br><span class="line">xattr            xcrun            xjc              xpath5.<span class="number">16</span>        xsubpp</span><br><span class="line">xattr-<span class="number">2.6</span>        xed              xml2-config      xpath5.<span class="number">18</span>        xsubpp5.<span class="number">16</span></span><br><span class="line">xattr-<span class="number">2.7</span>        xgettext<span class="class">.pl</span>      xml2man          xsanctl          xsubpp5.<span class="number">18</span></span><br><span class="line">xcode-select     xgettext5.<span class="number">16</span><span class="class">.pl</span>  xmlcatalog       xscertadmin      xxd</span><br><span class="line">XcodeYangdeMBP2:~ xcodeyang$ x</span><br></pre></td></tr></table></figure>
<ul>
<li>命令别名配置功能： (alias)</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span><span class="keyword">alias</span> xcodedaniel=<span class="string">'ls'</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>cd <span class="constant">Documents</span>/</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:Documents</span> xcodeyang<span class="variable">$ </span>xcodedaniel</span><br><span class="line"><span class="constant">GItHub</span>		<span class="constant">Welcome</span>.itmz	bloodsugar	技术部分享</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:Documents</span> xcodeyang<span class="variable">$ </span>ls</span><br><span class="line"><span class="constant">GItHub</span>		<span class="constant">Welcome</span>.itmz	bloodsugar	技术部分享</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:Documents</span> xcodeyang$</span><br></pre></td></tr></table></figure>
<p>可变性与方便性</p>
<blockquote>
<p>举例：MAIL 变量不同用户设置<br>yzp -&gt;  /var/spool/mail/yzp<br>cy   -&gt;  /var/spool/mail/cy<br>pj   -&gt;  /var/spool/mail/pj<br>zm  -&gt;  /var/spool/mail/zm</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$USER</span></span><br><span class="line">xcodeyang</span><br></pre></td></tr></table></figure>
<h3 id="变量的取用与配置：echo,_变量配置守则,_unset">变量的取用与配置：echo, 变量配置守则, unset</h3><p><code>变量的取用就如同上面的范例，利用 echo 就能够读出，只是需要在变量名称前面加上 $ ， 或者是以 ${变量} 的方式来取用都可以</code></p>
<h4 id="变量的配置守则">变量的配置守则</h4><ul>
<li><p>变量与变量内容以一个等号『=』来连结，如下所示： </p>
<blockquote>
<p>『yname=zhipingyang』</p>
</blockquote>
</li>
<li><p>等号两边不能直接接空格符，如下所示为错误： </p>
<blockquote>
<p>『myname = zhipingyang』或『myname=zhiping yang』</p>
</blockquote>
</li>
<li><p>变量名称只能是英文字母与数字，但是开头字符不能是数字，如下为错误： </p>
<blockquote>
<p>『2myname=zhipingyang』</p>
</blockquote>
</li>
<li><p>变量内容若有空格符可使用双引号『”』或单引号『’』将变量内容结合起来，但<br>双引号内的特殊字符如 $ 等，可以保有原本的特性，如下所示：</p>
<blockquote>
<p>『var=”lang is $LANG”』则『echo $var』可得『lang is en_US』</p>
</blockquote>
</li>
<li><p>单引号内的特殊字符则仅为一般字符 (纯文本)，如下所示：</p>
<blockquote>
<p>『var=’lang is $LANG’』则『echo $var』可得『lang is $LANG』</p>
</blockquote>
</li>
<li><p>可用跳脱字符『 \ 』将特殊符号(如 [Enter], $, \, 空格符, ‘等)变成一般字符；</p>
<blockquote>
<p>XcodeYangdeMBP2:~ xcodeyang$ myname=hello\ world</p>
</blockquote>
</li>
<li><p>在一串命令中，还需要藉由其他的命令提供的信息，可以使用反单引号『<code>命令</code>』或 『$(命令)』。特别注意，那个 ` 是键盘上方的数字键 1 左边那个按键，而不是单引号！ 例如想要取得核心版本的配置：</p>
<blockquote>
<p>『version=$(uname -r)』再『echo $version』可得『2.6.18-128.el5』</p>
</blockquote>
</li>
<li><p>若该变量为扩增变量内容时，则可用 “$变量名称” 或 ${变量} 累加内容，如下所示：</p>
<blockquote>
<p>『PATH=”$PATH”:/home/bin』</p>
</blockquote>
</li>
<li><p>若该变量需要在其他子程序运行，则需要以 export 来使变量变成环境变量：</p>
<blockquote>
<p>『export PATH』</p>
</blockquote>
</li>
<li><p>取消变量的方法为使用 unset ：『unset 变量名称』例如取消 myname 的配置：</p>
<blockquote>
<p>『unset myname』</p>
</blockquote>
</li>
</ul>
<p>设置myname变量</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 例子一</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$myname</span></span><br><span class="line"><span class="comment">#				&lt;==这里并没有任何数据～因为这个变量尚未被配置！是空的！</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>myname = <span class="constant">Daniel</span></span><br><span class="line">-<span class="symbol">bash:</span> <span class="symbol">myname:</span> command <span class="keyword">not</span> found</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>myname=<span class="constant">Daniel</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$myname</span></span><br><span class="line"><span class="constant">Daniel</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>bash</span><br><span class="line">bash-<span class="number">3.2</span><span class="variable">$ </span>echo <span class="variable">$myname</span></span><br><span class="line"><span class="comment">#				&lt;==这里并没有任何数据～因为这个变量是自定义变量（局部变量）</span></span><br><span class="line">bash-<span class="number">3.2</span><span class="variable">$ </span>exit</span><br><span class="line">exit</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>export myname	<span class="comment">#修改成环境变量(全局变量)</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>bash</span><br><span class="line">bash-<span class="number">3.2</span><span class="variable">$ </span>echo <span class="variable">$myname</span></span><br><span class="line"><span class="constant">Daniel</span></span><br><span class="line">bash-<span class="number">3.2</span><span class="variable">$ </span>unset myname</span><br><span class="line">bash-<span class="number">3.2</span><span class="variable">$ </span>echo <span class="variable">$myname</span></span><br><span class="line">bash-<span class="number">3.2</span><span class="variable">$ </span>exit</span><br><span class="line">exit</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$myname</span></span><br><span class="line"><span class="constant">Daniel</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span></span><br><span class="line"><span class="comment"># 例子二</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$HOME</span></span><br><span class="line">/<span class="constant">Users</span>/xcodeyang</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span><span class="constant">HOME</span>=<span class="variable">$HOME</span>/home/bin</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:xcodeyang</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$HOME</span></span><br><span class="line">/<span class="constant">Users</span>/xcodeyang/home/bin</span><br><span class="line"><span class="comment"># myname=$mynameyes  </span></span><br><span class="line"><span class="comment"># 如果没有双引号，name 的内容是 $nameyes 这个变量！</span></span><br><span class="line"><span class="comment"># tip：配错使用control+c取消继续，下面是正确的</span></span><br><span class="line"><span class="comment"># myname="$myname"yes</span></span><br><span class="line"><span class="comment"># myname=$&#123;myname&#125;yes	&lt;==以此例较佳！</span></span><br><span class="line"><span class="comment"># 猜测一下，那个是对/错</span></span><br><span class="line">myname=<span class="string">"myname's name"</span> </span><br><span class="line">myname=<span class="string">'myname'</span>s name<span class="string">' </span><br><span class="line">myname=myname\'s\ name</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$name</span></span><br><span class="line">yzp</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>name=<span class="string">"$name is daniel"</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$name</span></span><br><span class="line">yzp is daniel</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>name=<span class="string">'$name is daniel'</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$name</span></span><br><span class="line"><span class="variable">$name</span> is daniel</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang$</span><br></pre></td></tr></table></figure>
<h3 id="环境变量的功能：_env_与常见环境变量说明,_set,_export">环境变量的功能： env 与常见环境变量说明, set, export</h3><p><code>bash 可不只有环境变量喔，还有一些与 bash 操作接口有关的变量，以及用户自己定义的变量存在的. set 除了环境变量之外， 还会将其他在 bash 内的变量通通显示出来哩！信息太多</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">XcodeYangdeMBP2:</span>~ xcodeyang$ newname=daniel</span><br><span class="line"><span class="string">XcodeYangdeMBP2:</span>~ xcodeyang$ name=xcodeyang</span><br><span class="line"><span class="string">XcodeYangdeMBP2:</span>~ xcodeyang$ export name</span><br><span class="line"><span class="string">XcodeYangdeMBP2:</span>~ xcodeyang$ env #&lt;==看这里</span><br><span class="line">TERM_PROGRAM=Apple_Terminal #使用&#123;大写的字母&#125;来配置的变量一般为系统内定需要的变量</span><br><span class="line">SHELL=<span class="regexp">/bin/</span>bash</span><br><span class="line">TERM=xterm-<span class="number">256</span>color</span><br><span class="line">TMPDIR=<span class="regexp">/var/</span>folders<span class="regexp">/1c/</span>hw10tv792_92fz5cswgmzqmc0000gn<span class="regexp">/T/</span></span><br><span class="line">Apple_PubSub_Socket_Render=<span class="regexp">/private/</span>tmp<span class="regexp">/com.apple.launchd.Zcy3n3bgYL/</span>Render</span><br><span class="line">TERM_PROGRAM_VERSION=<span class="number">361.1</span></span><br><span class="line">TERM_SESSION_ID=A7EE49FA-<span class="number">7</span>C48-<span class="number">49</span>A4-BA91-<span class="number">8144</span>FACFB146</span><br><span class="line">name=xcodeyang	#&lt;==看这里</span><br><span class="line">USER=xcodeyang</span><br><span class="line">SSH_AUTH_SOCK=<span class="regexp">/private/</span>tmp<span class="regexp">/com.apple.launchd.Sey2Soe8fS/</span>Listeners</span><br><span class="line">__CF_USER_TEXT_ENCODING=<span class="number">0x1F5</span>:<span class="number">0x0</span>:<span class="number">0x0</span></span><br><span class="line">PATH=<span class="regexp">/Users/</span>xcodeyang<span class="regexp">/.rbenv/</span><span class="string">shims:</span><span class="regexp">/Users/</span>xcodeyang<span class="regexp">/.rbenv/</span><span class="string">bin:</span><span class="regexp">/usr/</span>local<span class="regexp">/bin:/</span>usr<span class="regexp">/bin:/</span><span class="string">bin:</span><span class="regexp">/usr/</span><span class="string">sbin:</span><span class="regexp">/sbin:/</span>usr<span class="regexp">/local/</span>git/bin</span><br><span class="line">PWD=<span class="regexp">/Users/</span>xcodeyang</span><br><span class="line">XPC_FLAGS=<span class="number">0x0</span></span><br><span class="line">RBENV_SHELL=bash</span><br><span class="line">XPC_SERVICE_NAME=<span class="number">0</span></span><br><span class="line">SHLVL=<span class="number">1</span></span><br><span class="line">HOME=<span class="regexp">/Users/</span>xcodeyang</span><br><span class="line">LOGNAME=xcodeyang</span><br><span class="line">LC_CTYPE=UTF-<span class="number">8</span></span><br><span class="line">_=<span class="regexp">/usr/</span>bin/env</span><br><span class="line"><span class="string">XcodeYangdeMBP2:</span>~ xcodeyang$</span><br></pre></td></tr></table></figure>
<h3 id="变量的有效范围">变量的有效范围</h3><p>环境变量=全局变量<br>自定义变量=局部变量    </p>
<blockquote>
<p>为什么环境变量的数据可以被子程序所引用呢？这是因为内存配置的关系！理论上是这样的：</p>
<ul>
<li>当启动一个 shell，操作系统会分配一记忆区块给 shell 使用，此内存内之变量可让子程序取用</li>
<li>若在父程序利用 export 功能，可以让自定义变量的内容写到上述的记忆区块当中(环境变量)；</li>
<li>当加载另一个 shell 时 (亦即启动子程序，而离开原本的父程序了)，子 shell 可以将父 shell 的环境变量所在的记忆区块导入自己的环境变量区块当中。</li>
</ul>
</blockquote>
<h3 id="变量键盘读取、数组与宣告：_read,_declare,_array">变量键盘读取、数组与宣告： read, declare, array</h3><blockquote>
<p>我们上面提到的变量配置功能，都是由命令列直接配置的，那么，可不可以让用户能够经由键盘输入？ 什么意思呢？是否记得某些程序运行的过程当中，会等待使用者输入 “yes/no” 之类的信息啊？</p>
<h4 id="read">read</h4></blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$name</span></span><br><span class="line">zhipingyang</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>read name</span><br><span class="line">%^<span class="variable">$$</span>uhda asuh_uha!@<span class="comment">#~	#关键是没有之前那样的语法格式限制</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$name</span></span><br><span class="line">%^<span class="variable">$$</span>uhda asuh_uha!@<span class="comment">#~</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span></span><br><span class="line"><span class="comment">#-p  ：后面可以接提示字符！</span></span><br><span class="line"><span class="comment">#-t  ：后面可以接等待的『秒数！』这个比较有趣～不会一直等待使用者啦！</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>read -p <span class="string">"Please keyin your age: "</span> -t <span class="number">30</span> agenum</span><br><span class="line"><span class="constant">Please</span> keyin your <span class="symbol">age:</span> <span class="number">33</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$agenum</span></span><br><span class="line"><span class="number">33</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang$</span><br></pre></td></tr></table></figure>
<h4 id="declare_/_typeset">declare / typeset</h4><blockquote>
<p>declare 或 typeset 是一样的功能，就是在『宣告变量的类型』</p>
<p>-a  ：将后面名为 variable 的变量定义成为数组 (array) 类型<br>-i  ：将后面名为 variable 的变量定义成为整数数字 (integer) 类型<br>-x  ：用法与 export 一样，就是将后面的 variable 变成环境变量；<br>-r  ：将变量配置成为 readonly 类型，该变量不可被更改内容，也不能 unset</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1：</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>sum=<span class="number">10</span>+<span class="number">20</span>+<span class="number">30</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$sum</span></span><br><span class="line"><span class="number">10</span>+<span class="number">20</span>+<span class="number">30</span>		<span class="comment">#&lt;==默认类型是string</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>declare -i sum=<span class="number">10</span>+<span class="number">20</span>+<span class="number">30</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$sum</span></span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>declare -i sum=<span class="number">1</span>/<span class="number">3</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="variable">$sum</span></span><br><span class="line"><span class="number">0</span>	<span class="comment"># &lt;==bash 环境中的数值运算，默认最多仅能到达整数形态</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$</span><br><span class="line"></span><span class="comment">#示例2</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>declare -ixr sum=<span class="number">20</span>+<span class="number">30</span> <span class="comment">#只读整型环境变量</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>bash</span><br><span class="line">bash-<span class="number">3.2</span><span class="variable">$ </span>echo <span class="variable">$sum</span></span><br><span class="line"><span class="number">50</span>	<span class="comment">#子程序里依然可以访问</span></span><br><span class="line">bash-<span class="number">3.2</span><span class="variable">$ </span>exit</span><br><span class="line">exit</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>sum=<span class="number">30</span></span><br><span class="line">-<span class="symbol">bash:</span> <span class="symbol">sum:</span> readonly variable	<span class="comment">#不可修改</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span></span><br><span class="line"><span class="comment">#示例3: 建议直接以 $&#123;数组&#125; 的方式来读取</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>var[<span class="number">1</span>]=<span class="variable">$SHELL</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>var[<span class="number">2</span>]=<span class="variable">$sum</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>var[<span class="number">3</span>]=<span class="string">"helloworld"</span></span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang<span class="variable">$ </span>echo <span class="string">"$&#123;var[1]&#125;, $&#123;var[2]&#125;, $&#123;var[3]&#125;"</span></span><br><span class="line">/bin/bash, <span class="number">50</span>, helloworld</span><br><span class="line"><span class="constant">XcodeYangdeMBP2</span><span class="symbol">:~</span> xcodeyang$</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaScript/">javaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/phython/">phython</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/移动组周技术分享/">移动组周技术分享</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-移动周分享-第40期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/18/移动周分享-第40期/" class="article-date">
  	<time datetime="2015-12-18T10:30:00.000Z" itemprop="datePublished">2015-12-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/移动周分享-第40期/">移动周分享-第40期</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="linux_重定向命令">linux 重定向命令</h3><h4 id="1-_什么是数据流重定向">1. 什么是数据流重定向</h4><ul>
<li><p>Linux 默认提供了三个特殊设备，用于终端的显示和输出，分别为</p>
<ol>
<li>stdin（标准输入,对应于你在终端的输入）</li>
<li>stdout（标准输出，对应于终端的输出）</li>
<li>stderr（标准错误输出，对应于终端的输出）</li>
</ol>
</li>
<li><p>任何一条linux 命令执行，它会是这样一个过程：</p>
</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/051121.png" alt=""></p>
<blockquote>
<p>一个命令执行了：</p>
<p>先有一个输入：输入可以从键盘，也可以从文件得到</p>
<p>命令执行完成：成功了，会把成功结果输出到屏幕：standard output默认是屏幕</p>
<p>命令执行有错误：会把错误也输出到屏幕上面：standard error默认也是指的屏幕</p>
</blockquote>
<h4 id="2-输出重定向">2.输出重定向</h4><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;：以覆盖的方法将『正确的数据』输出到指定的文件或装置上</span><br><span class="line"></span><br><span class="line"><span class="prompt">1&gt; </span>：以覆盖的方法将『正确的数据』输出到指定的文件或装置上</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>&gt;&gt;：以累加的方法将『正确的数据』输出到指定的文件或装置上</span><br><span class="line"></span><br><span class="line"><span class="prompt">2&gt; </span>：以覆盖的方法将『错误的数据』输出到指定的文件或装置上</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>&gt;&gt;：以累加的方法将『错误的数据』输出到指定的文件或装置上</span><br><span class="line"></span><br><span class="line">&amp;&gt; ：以覆盖的方法将『正确和错误的数据』输出到指定的文件或装置上</span><br><span class="line"></span><br><span class="line">&amp;&gt;&gt;：以累加的方法将『正确和错误的数据』输出到指定的文件或装置上</span><br><span class="line"></span><br><span class="line">&gt; <span class="function_or_atom">sus</span>.<span class="function_or_atom">txt</span>   <span class="number">2</span>&gt; <span class="function_or_atom">err</span>.<span class="function_or_atom">txt</span>：以覆盖的方法将『正确的数据』输出到<span class="function_or_atom">sus</span>.<span class="function_or_atom">txt</span>,将『错误的数据』输出到<span class="function_or_atom">err</span>.<span class="function_or_atom">txt</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="function_or_atom">sus</span>.<span class="function_or_atom">txt</span>  <span class="number">2</span>&gt;&gt; <span class="function_or_atom">err</span>.<span class="function_or_atom">txt</span>：以累加的方法将『正确的数据』输出到<span class="function_or_atom">sus</span>.<span class="function_or_atom">txt</span>,将『错误的数据』输出到<span class="function_or_atom">err</span>.<span class="function_or_atom">txt</span></span><br></pre></td></tr></table></figure>
<p>eg: </p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ ls</span><br><span class="line">   </span><br><span class="line">#以覆盖的方法将『正确的数据』输出到指定的文件或装置上</span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ echo <span class="string">"new"</span> &gt; <span class="number">1.</span>txt</span><br><span class="line">    </span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ ls</span><br><span class="line">   <span class="number">1.</span>txt</span><br><span class="line">   </span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ cat <span class="number">1.</span>txt</span><br><span class="line">   <span class="keyword">new</span></span><br><span class="line">   </span><br><span class="line">#以累加的方法将『正确的数据』输出到指定的文件或装置上</span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ echo <span class="string">"add"</span> &gt;&gt; <span class="number">1.</span>txt</span><br><span class="line">   </span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ cat <span class="number">1.</span>txt</span><br><span class="line">   <span class="keyword">new</span></span><br><span class="line">   add</span><br><span class="line">   </span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ ech <span class="number">2.</span>txt</span><br><span class="line">   -<span class="string">bash:</span> <span class="string">ech:</span> 未找到命令</span><br><span class="line">   </span><br><span class="line">   #以覆盖的方法将『错误的数据』输出到指定的文件或装置上</span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ ech <span class="number">2</span>&gt; <span class="number">2.</span>txt</span><br><span class="line">   </span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ cat <span class="number">2.</span>txt</span><br><span class="line">   -<span class="string">bash:</span> <span class="string">ech:</span> 未找到命令</span><br><span class="line">   </span><br><span class="line">#以累加的方法将『错误的数据』输出到指定的文件或装置上</span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ ech <span class="number">2</span>&gt;&gt; <span class="number">2.</span>txt</span><br><span class="line">   </span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">   $ cat <span class="number">2.</span>txt</span><br><span class="line">   -<span class="string">bash:</span> <span class="string">ech:</span> 未找到命令</span><br><span class="line">   -<span class="string">bash:</span> <span class="string">ech:</span> 未找到命令</span><br><span class="line">   </span><br><span class="line">   #以覆盖的方法将『正确的数据』输出到sus.txt,将『错误的数据』输出到err.txt</span><br><span class="line">   Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">$ echo <span class="string">"all"</span> &gt; sus.txt <span class="number">2</span>&gt; err.txt</span><br><span class="line">#以累加的方法将『正确的数据』输出到sus.txt,将『错误的数据』输出到err.txt</span><br><span class="line">Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">$ eco <span class="string">"add"</span> &gt;&gt; sus.txt <span class="number">2</span>&gt;&gt; err.txt</span><br><span class="line"></span><br><span class="line">Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">$ cat sus.txt</span><br><span class="line">all</span><br><span class="line"></span><br><span class="line">Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">$ cat err.txt</span><br><span class="line">-<span class="string">bash:</span> <span class="string">eco:</span> 未找到命令</span><br><span class="line"></span><br><span class="line">Administrator<span class="annotation">@jungou</span>-PC <span class="regexp">/cygdrive/</span>d/<span class="number">20151221</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<h4 id="3-输入重定向">3.输入重定向</h4><ul>
<li>在标准输入中，&lt;代表将原来需要由键盘输入的数据改由文件内容来替代，&lt;&lt;则代表结束输入。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   Administrator@jungou-PC /cygdrive/d/<span class="number">20151221</span></span><br><span class="line">   $ cat <span class="tag">input</span><span class="class">.txt</span></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span> </span><br><span class="line">#这里按下[ctrl+d]来离开</span><br><span class="line">   Administrator@jungou-PC /cygdrive/d/<span class="number">20151221</span></span><br><span class="line">   $ cat <span class="tag">input</span><span class="class">.txt</span></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br></pre></td></tr></table></figure>
<h2 id="Android_测试库">Android 测试库</h2><p>Android的测试支持库为测试Android应用提供了大量框架。该库提供了一组API快速构建和运行测试代码，包括JUnit4和功能用户界面(UI)测试。可以从Android Studio IDE中或命令行这执行。</p>
<p>Android的测试支持库可通过Android SDK管理器获取。参考： Testing Support Library Setup 。</p>
<p><img src="index_files/69ad9c93-77a9-43f0-81dc-381de769725c.png" alt=""></p>
<h5 id="AndroidJUnitRunner"><a href="http://automationtesting.sinaapp.com/blog/android_Testing_Support_Library#AndroidJUnitRunner" target="_blank" rel="external">AndroidJUnitRunner</a></h5><p>AndroidJUnitRunner类是一个JUnit测试运行器，可以让你在Android设备上执行包括Espresso和UI Automatorr测试框架运行JUnit3或JUnit4中风格的测试类。测试运行器手柄测试加载测试包和应用，运行测试，并报告测试结果。该类取代InstrumentationTestRunner类(仅支持JUnit 3)。</p>
<p>这个运行器的主要特点：</p>
<ul>
<li><p>JUnit支持</p>
</li>
<li><p>获得设备信息</p>
</li>
<li><p>测试筛选</p>
</li>
<li><p>测试分片</p>
</li>
</ul>
<p>要求的Android2.2（API 8）或更高。</p>
<h5 id="Espresso"><a href="http://automationtesting.sinaapp.com/blog/android_Testing_Support_Library#Espresso" target="_blank" rel="external">Espresso</a></h5><p>Espresso提供了一组API来构建UI测以测试用户流程。这些API让你写简洁和可靠运行的自动化UI测试。Espresso非常适合白盒自动测试，在测试代码利用实现代码的细节从应用程序测试。</p>
<p>Espresso的主要特性：</p>
<ul>
<li><p>灵活的API用于查看和适配目标应用。</p>
</li>
<li><p>一套扩展的action API自动化UI交互。</p>
</li>
<li><p>UI线程同步以提高测试的可靠性。欲了解更多信息，请参见UI线程同步。</p>
</li>
</ul>
<p>要求Android2.2（API 8）或更高。</p>
<h5 id="UI_Automator"><a href="http://automationtesting.sinaapp.com/blog/android_Testing_Support_Library#UIAutomator" target="_blank" rel="external">UI Automator</a></h5><p>UI Automator提供了一组API来构建基于交互UI的测试。API允许你执行操作，如打开设置菜单，非常适合黑盒自动化测试，在测试代码不依赖于应用的内部实现。</p>
<p>主要特性：</p>
<ul>
<li><p>UI Automator Viewer：检查的布局层次。</p>
</li>
<li><p>API来获取设备状态信息并执行操作。欲了解更多信息，请参见访问设备状态。</p>
</li>
<li><p>API跨应用测试。</p>
</li>
</ul>
<p>要求Android4.3（API等级18）或者更高。</p>
<p>uiautomatorviewer提供了一个方便的图形用户界面进行扫描和分析在Android设备上当前显示的UI组件。您可以使用此工具来检查的布局层次和查看UI组件。</p>
<p>UiDevice类可以访问设备并进行操作。你可以调用它的方法来访问设备属性，如当前的方向或显示尺寸。该UiDevice类也让您执行操作，例如：旋转设备；按下D-pad按钮；按Back、Home、Menu等；打开通知树栏；当前窗口截图等。</p>
<p>多应用相关的API： UiCollection枚举容器的UI元素以计数，或通过文字(或属性等)针定位子元素; UIObject表示是在设备上可见的UI元素; <a href="http://automationtesting.sinaapp.com/wiki/UiScrollable" target="_blank" rel="external">UiScrollable?</a>：为可滚动UI容器提供查找支持； <a href="http://automationtesting.sinaapp.com/wiki/UiSelector" target="_blank" rel="external">UiSelector?</a>：查询一个或者多个UI元素; Configurator: 设置参数。</p>
<h4 id="JUnit4_Annotations常用注释">JUnit4 Annotations常用注释</h4><p>JUnit4的测试类不用再继承TestCase类了。使用注解会方便很多。</p>
<p>@Before：初始化方法</p>
<p>@After：释放资源</p>
<p>@Test：测试方法，在这里可以测试期望异常和超时时间</p>
<p>@Ignore：忽略的测试方法</p>
<p>@BeforeClass：针对所有测试，只执行一次，且必须为static void</p>
<p>@AfterClass：针对所有测试，只执行一次，且必须为static void</p>
<p>一个JUnit 4 的单元测试用例执行顺序为：</p>
<p>@BeforeClass –&gt; @Before –&gt; @Test –&gt; @After –&gt; @AfterClass</p>
<p>每一个测试方法的调用顺序为：</p>
<p>@Before –&gt; @Test –&gt; @After</p>
<h2 id="app推送架构设计之全局观——xpleemoon">app推送架构设计之全局观——xpleemoon</h2><p><img src="http://img.my.csdn.net/uploads/201512/20/1450607389_8633.png" alt="app推送架构设计之全局观"></p>
<ul>
<li>BroadcastReceiver只负责显示Notification，而Service才是推送消息的实际执行者，那为何要如此设计呢？<ul>
<li>BroadcastReceiver生命周期最多只有8秒，超过8秒会造成ANR，而Service则不存在这个问题。很明显，BroadcastReceiver天生就是不适合处理复杂操作的组件。因此，考虑到未来推送的复杂性和扩展性，上图的具体处理流程将是：<ol>
<li>BroadcastReceiver接收push消息</li>
<li>显示Notification</li>
<li>点击Notification（Notification包含的PendingIntent用于启动Service），启动Service</li>
<li>Service解析Notification传递过来的Intent，执行具体操作（可通过策略模式，让代码不要那么烂），比如打开一个页面、执行网络请求、执行本地操作……</li>
</ol>
</li>
<li>Notification上按钮的点击是无法自动取消Notification，因此，Service还用于取消Notification</li>
<li>显示和执行分开，同时执行通过策略模式进行。这样的好处是便于维护和降低代码耦合</li>
</ul>
</li>
</ul>
<h2 id="express-js_入门介绍_-_曾铭">express.js 入门介绍 - 曾铭</h2><ul>
<li><a href="http://expressjs.com/en/index.html" target="_blank" rel="external">官方文档</a>非常清晰</li>
</ul>
<h3 id="三个_Demo">三个 Demo</h3><ul>
<li>node.js 的 hello world</li>
<li>express.js app 的 hello app</li>
<li>一个完整的 express.js 项目结构</li>
</ul>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">➜  myapp  tree -L <span class="number">2</span></span><br><span class="line">.</span><br><span class="line">├── app.js</span><br><span class="line">├── bin</span><br><span class="line">│   └── www</span><br><span class="line">├── hello_app.js</span><br><span class="line">├── helloworld.js</span><br><span class="line">├── node_modules</span><br><span class="line">│   ├── ...</span><br><span class="line">├── package.json</span><br><span class="line">├── public</span><br><span class="line">│   ├── images</span><br><span class="line">│   ├── javascripts</span><br><span class="line">│   └── stylesheets</span><br><span class="line">├── routes</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── users.js</span><br><span class="line">└── views</span><br><span class="line">    ├── error.jade</span><br><span class="line">    ├── index.jade</span><br><span class="line">    └── layout.jade</span><br></pre></td></tr></table></figure>
<h2 id="weui_-_王胜">weui - 王胜</h2><p><strong>WeUI 为微信 Web 服务量身设计</strong></p>
<blockquote>
<p>WeUI是一套同微信原生视觉体验一致的基础样式库，由微信官方设计团队为微信 Web 开发量身设计，可以令用户的使用感知更加统一。包含button、cell、dialog、 progress、 toast、article、icon等各式元素。</p>
</blockquote>
<p>查看演示实例</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/weui/weui.git</span><br><span class="line">cd weui</span><br><span class="line">npm install -g gulp</span><br><span class="line">npm install</span><br><span class="line">gulp -ws</span><br></pre></td></tr></table></figure>
<p>  运行gulp -ws命令，会监听src目录下所有文件的变更，并且默认会在8080端口启动服务器，然后在浏览器打开 <a href="http://localhost:8080/example。" target="_blank" rel="external">http://localhost:8080/example。</a></p>
<p>参考 <a href="https://github.com/weui/weui" target="_blank" rel="external">github-weui</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JUnit4/">JUnit4</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/express/">express</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weui/">weui</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/移动组周技术分享/">移动组周技术分享</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享- 前端入门篇2期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/11/周精益分享- 前端入门篇2期/" class="article-date">
  	<time datetime="2015-12-11T10:30:00.000Z" itemprop="datePublished">2015-12-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/11/周精益分享- 前端入门篇2期/">周精益分享 - 前端入门篇2期</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="博客地址"><a href="">博客地址</a></h3><h2 id="Swift柯里化_Curring_学习">Swift柯里化 Curring 学习</h2><h3 id="什么是Curring">什么是Curring</h3><blockquote>
<p><a href="https://zh.wikipedia.org/wiki/%E6%9F%AF%E9%87%8C%E5%8C%96" target="_blank" rel="external">维基百科解释</a><br>在计算机科学中，柯里化（英语：Currying），又译为卡瑞化或加里化，是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。</p>
</blockquote>
<p>概念看上去还是有点抽象，直接看代码</p>
<p><strong>例子</strong><br>注：所有swift代码都可以放到playgroun中运行查看输出<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">UIKit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个普通求sum函数</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a: Int, b: Int, <span class="built_in">c</span>: Int)</span></span> -&gt; <span class="type">Int</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(a)</span> + <span class="subst">\(b)</span> + <span class="subst">\(<span class="built_in">c</span>)</span> = <span class="subst">\(a + b + <span class="built_in">c</span>)</span>"</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b + <span class="built_in">c</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>, b: <span class="number">2</span>,<span class="built_in">c</span>: <span class="number">3</span>) <span class="comment">// 打印1 + 2 + 3 = 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 柯里化版本的求sum函数</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">addCur</span><span class="params">(a: Int)</span></span>(b: <span class="type">Int</span>)(<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(a)</span> + <span class="subst">\(b)</span> + <span class="subst">\(<span class="built_in">c</span>)</span> = <span class="subst">\(a + b + <span class="built_in">c</span>)</span>"</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b + <span class="built_in">c</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addCur(<span class="number">1</span>)(b: <span class="number">2</span>)(<span class="built_in">c</span>: <span class="number">3</span>) <span class="comment">// 打印1 + 2 + 3 = 6</span></span><br></pre></td></tr></table></figure></p>
<p>你也许觉得Curring只是用一个特殊的写法<br>其他与普通函数无异<br>那么换一种curring的调用方式</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// curring 另类调用方式</span></span><br><span class="line">let funcWithA = <span class="function"><span class="title">addCur</span><span class="params">(<span class="number">1</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"funcWithA type : \(funcWithA.dynamicType)"</span>)</span></span></span><br><span class="line">let funcWithAB = <span class="function"><span class="title">funcWithA</span><span class="params">(b: <span class="number">2</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"funcWithAB type : \(funcWithAB.dynamicType)"</span>)</span></span></span><br><span class="line">let resultCurring = <span class="function"><span class="title">funcWithAB</span><span class="params">(c: <span class="number">3</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"resultCurring type : \(resultCurring.dynamicType)"</span>)</span></span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">此时你还是会觉得这只是把一个函数拆开来调用了 那么我们打印一下 每个调用步骤中变量的类型</span><br></pre></td></tr></table></figure>
<p>let funcWithA = addCur(1)<br>print(“funcWithA type : (funcWithA.dynamicType)”) //<br>let funcWithAB = funcWithA(b: 2)<br>print(“funcWithAB type : (funcWithAB.dynamicType)”)<br>let resultCurring = funcWithAB(c: 3)<br>print(“resultCurring type : (resultCurring.dynamicType)”)<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">打印结果为</span><br></pre></td></tr></table></figure></p>
<p>1 + 2 + 3 = 6<br>funcWithA type : Int -&gt; Int -&gt; Int<br>funcWithAB type : Int -&gt; Int<br>1 + 2 + 3 = 6<br>resultCurring type : Int<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">可以看到 变量funcWithA 为 Int -&gt; Int -&gt; Int 类型</span><br><span class="line">funcWithAB 为Int -&gt; Int</span><br><span class="line"></span><br><span class="line">这说明 curring函数在绑定最后一个参数之前 每个步骤返回的值都是一个函数</span><br><span class="line"></span><br><span class="line"><span class="header">###Curring实现原理</span></span><br><span class="line"></span><br><span class="line">Swift实现Curring的基础有两个</span><br><span class="line"><span class="bullet">- </span>函数是一级公民</span><br><span class="line"><span class="bullet">- </span>闭包</span><br><span class="line"></span><br><span class="line">[<span class="link_label">啊崢的Swift Curring文章</span>](<span class="link_url">http://www.jianshu.com/p/6eaacadafa1a</span>)代码例子解释的已经很清楚了</span><br></pre></td></tr></table></figure></p>
<p>class Currying<br>{<br>    /<strong><em> uncurried:普通函数 </em></strong>/<br>    // 接收多个参数的函数<br>    func add(a: Int, b: Int, c: Int) -&gt; Int{<br>        println(“(a) + (b) + (c)”)<br>        return a + b + c<br>    }</p>
<pre><code><span class="comment">/*** 手动实现柯里化函数 ***/</span>
<span class="comment">// 把上面的函数转换为柯里化函数，首先转成接收第一个参数a，并且返回接收余下第一个参数b的新函数（采用闭包）</span>
<span class="comment">// 为了让大家都能看懂,我帮你们拆解来看下</span>
<span class="comment">// (a: Int) : 参数</span>
<span class="comment">// (b:Int) -&gt; (c: Int) -&gt; Int : 函数返回值（一个接收参数b的函数,并且这个函数又返回一个接收参数c,返回值为Int类型的函数)</span>

<span class="comment">// 定义一个接收参数a,并且返回一个接收参数b的函数,并且这个函数又返回一个接收参数c,返回值为Int类型的函数</span>
<span class="func"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a: Int)</span></span> -&gt; (b:<span class="type">Int</span>) -&gt; (<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span>{

    <span class="comment">// 一个接收参数b的函数,并且这个函数又返回一个接收参数c,返回值为Int类型的函数</span>
    <span class="keyword">return</span> { (b:<span class="type">Int</span>) -&gt; (<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span>

        <span class="comment">// 返回一个接收余下第一个参数c，并且有返回结果为Int类型的函数</span>
        <span class="keyword">return</span> { (<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span>

            <span class="keyword">return</span> a + b + <span class="built_in">c</span>;

 注解： 这里为什么能使用参数a,b,<span class="built_in">c</span>?
       利用闭包的值捕获特性，即使这些值作用域不在了，也可以捕获到他们的值。
       闭包会自动判断捕获的值是值拷贝还是值引用，如果修改了，就是值引用，否则值拷贝。

       注意只有在闭包中才可以，a,b,<span class="built_in">c</span>都在闭包中。

        }

    }

}


<span class="comment">/*** curried: 系统自带的柯里化函数 ***/</span>
<span class="func"><span class="keyword">func</span> <span class="title">addCur</span><span class="params">(a: Int)</span></span>(b: <span class="type">Int</span>)(<span class="built_in">c</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span>{
    <span class="built_in">println</span>(<span class="string">"<span class="subst">\(a)</span> + <span class="subst">\(b)</span> + <span class="subst">\(<span class="built_in">c</span>)</span>"</span>)
    <span class="keyword">return</span> a + b + <span class="built_in">c</span>
}
</code></pre><p>}<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">###OC版的Curring</span></span><br><span class="line"></span><br><span class="line">大部分的iOS程序员都还是习惯写OC 找了一个[<span class="link_label">OC版本的Curring</span>](<span class="link_url">https://gist.github.com/lukhnos/1771842</span>)实现 我们可以理解的更深刻</span><br></pre></td></tr></table></figure></p>
<h1 id="include">include <stdio.h></stdio.h></h1><p>int f(int x, int y)<br>{<br>    return x + y;<br>}</p>
<p>int main()<br>{<br>    // 闭包1 绑定第一个参数<br>    typedef int (^int_to_int_t)(int);<br>    // 闭包2 绑定第二个参数<br>    typedef int_to_int_t (^int_to_int_to_int_t)(int);</p>
<pre><code><span class="keyword">int_to_int_to_int_t</span> h = ^(<span class="keyword">int</span> x) {
    <span class="keyword">int_to_int_t</span> g = ^(<span class="keyword">int</span> y) {
        <span class="comment">// 将两个闭包持有的参数做处理 返回结果</span>
        <span class="keyword">return</span> f(x, y);  
    };

    <span class="keyword">return</span> g;        
};

<span class="comment">// 第一个闭包持有 5</span>
<span class="keyword">int_to_int_t</span> g = h(<span class="number">5</span>);

<span class="keyword">int</span> z;
<span class="comment">// 第二个闭包持有10 并返回结果</span>
z = g(<span class="number">10</span>);
<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, z);
</code></pre><p>}<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">###什么？你觉得然并卵！</span></span><br><span class="line"></span><br><span class="line">你一定觉得这是一个然并卵的东西</span><br><span class="line"></span><br><span class="line">好吧 我第一个看到的时候 只是觉得有趣 其实也没有想到较好的应用场景 </span><br><span class="line"></span><br><span class="line">[<span class="link_label">为什么要柯里化</span>](<span class="link_url">https://gist.github.com/jcouyang/b56a830cd55bd230049f</span>)这篇文章提供的例子给了很多启发</span><br><span class="line"></span><br><span class="line">用Swift重新实现了一遍 又加了一点打印 豁然开朗</span><br><span class="line"></span><br><span class="line">上代码</span><br></pre></td></tr></table></figure></p>
<p>// 拼接字符<br>func concat(chars: Array<string>) {<br>    var resultString = “”<br>    for char in chars {<br>        resultString += char<br>    }<br>    print(resultString)<br>}</string></p>
<p>concat([“1”,”2”,”3”])<br>print(“<strong><strong><strong>**</strong></strong></strong>“)</p>
<p>// 每个字符代表的数字 + 1 后再拼接<br>func concatAdd(chars: Array<string>, addNum: Int) {<br>    var resultString = “”<br>    for char in chars {<br>        var num = Int(char)!<br>        num = num + addNum<br>        let newChar = String(num)<br>        resultString += newChar<br>    }<br>    print(resultString)<br>}</string></p>
<p>concatAdd([“1”,”2”,”3”], addNum: 1)<br>concatAdd([“1”,”2”,”3”], addNum: 2)<br>concatAdd([“1”,”2”,”3”], addNum: 3)</p>
<p>print(“<strong><strong><strong>**</strong></strong></strong>“)<br>// 每个字符代表的数字 <em>10 后再拼接<br>func concatMultiply(chars: Array<string>, multiplyNum: Int) {<br>    var resultString = “”<br>    for char in chars {<br>        var num = Int(char)!<br>        num = num </string></em> multiplyNum<br>        let newChar = String(num)<br>        resultString += newChar<br>    }<br>    print(resultString)<br>}</p>
<p>concatMultiply([“1”,”2”,”3”], multiplyNum: 1)<br>concatMultiply([“1”,”2”,”3”], multiplyNum: 2)<br>concatMultiply([“1”,”2”,”3”], multiplyNum: 3)</p>
<p>print(“<strong><strong><strong>**</strong></strong></strong>“)<br>/<strong><strong><br>让我们使用柯里化吧<br>*</strong></strong>/<br>func add(a: Int)(b: Int) -&gt; Int{<br>    return a + b<br>}</p>
<p>func multiply(a: Int)(b: Int) -&gt; Int{<br>    return a * b<br>}</p>
<p>func concatByCurring(chars: Array<string>)(caculateFunc: (Int)-&gt;Int) {<br>    var resultString = “”<br>    for char in chars {<br>        var num = Int(char)!<br>        var newNum = caculateFunc(num)<br>        let newChar = String(newNum)<br>        resultString += newChar<br>    }<br>    print(resultString)<br>}</string></p>
<p>concatByCurring([“1”,”2”,”3”])(caculateFunc: add(1))<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: add(2))<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: add(3))</p>
<p>print(“<strong><strong><strong>**</strong></strong></strong>“)<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: multiply(1))<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: multiply(2))<br>concatByCurring([“1”,”2”,”3”])(caculateFunc: multiply(3))</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">以上的代码用普通的函数 和 Curring函数 处理了同一个功能</span><br><span class="line"></span><br><span class="line">Curring优势明显</span><br><span class="line"><span class="bullet">- </span>重用了拼接代码</span><br><span class="line"><span class="bullet">- </span>支持更为灵活的算法替换</span><br><span class="line"><span class="bullet">- </span>写功能扩展的人不用怎么关心老代码的实现</span><br><span class="line"></span><br><span class="line"><span class="header">###iOS开发中可以应用的场景</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**使用Curring处理selector**</span></span><br><span class="line">这个例子是我在看[<span class="link_label">王巍的Swifter</span>](<span class="link_url">https://selfstore.io/~onevcat</span>)时候看到的一个例子</span><br><span class="line"></span><br><span class="line">不废话 直接上代码</span><br></pre></td></tr></table></figure>
<p>// 打印func类型<br>class People: NSObject {<br>    func speak(){<br>        print(“hello”)<br>    }</p>
<pre><code><span class="func"><span class="keyword">func</span> <span class="title">printSpeak</span><span class="params">()</span></span> {
    <span class="built_in">print</span>(<span class="string">"People func speak  : <span class="subst">\(People.speak.<span class="keyword">dynamicType</span>)</span>"</span>)
}
</code></pre><p>}</p>
<p>People().printSpeak()<br>// 打印结果为 People func speak  : People -&gt; () -&gt; ()<br>// 可见实例的方法就是一个Curring结构<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">下面是[<span class="link_label">Instance Methods are Curried Functions in Swift</span>](<span class="link_url">http://oleb.net/blog/2014/07/swift-instance-methods-curried-functions/?utm_campaign=iOS_Dev_Weekly_Issue_157&amp;utm_medium=email&amp;utm_source=iOS%2BDev%2BWeekly</span>)中的例子 很开脑洞</span><br></pre></td></tr></table></figure></p>
<p>//Selector demo<br>protocol TargetAction {<br>    func performAction()<br>}</p>
<p>struct TargetActionWrapper<t: anyobject=""> : TargetAction {<br>    weak var target: T?</t:></p>
<pre><code><span class="comment">// 此处的action类型是不是和我上面代码中打印的结构一致</span>
<span class="built_in">let</span> action: <span class="params">(T)</span> -&gt; <span class="params">()</span> -&gt; <span class="params">()</span>

func performAction<span class="params">()</span> -&gt; <span class="params">()</span> {
    <span class="keyword">if</span> <span class="built_in">let</span> t = target {
        <span class="comment">// Curring调用</span>
        action<span class="params">(t)</span><span class="params">()</span>
    }
}
</code></pre><p>}</p>
<p>enum ControlEvent {<br>    case TouchUpInside<br>    case ValueChanged<br>}</p>
<p>class Control {<br>    var actions = <a href="">ControlEvent: TargetAction</a></p>
<pre><code><span class="func"><span class="keyword">func</span> <span class="title">setTarget</span><span class="generics">&lt;T: AnyObject&gt;</span><span class="params">(target: T, action: <span class="params">(T)</span></span></span> -&gt; () -&gt; (), controlEvent: <span class="type">ControlEvent</span>) {
    actions[controlEvent] = <span class="type">TargetActionWrapper</span>(target: target, action: action)
}

<span class="func"><span class="keyword">func</span> <span class="title">removeTargetForControlEvent</span><span class="params">(controlEvent: ControlEvent)</span></span> {
    actions[controlEvent] = <span class="literal">nil</span>
}

<span class="func"><span class="keyword">func</span> <span class="title">performActionForControlEvent</span><span class="params">(controlEvent: ControlEvent)</span></span> {
    actions[controlEvent]?.performAction()
}
</code></pre><p>}</p>
<p>class MyViewController {<br>    let button = Control()</p>
<pre><code><span class="func"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> {
    button.setTarget(<span class="keyword">self</span>, action: <span class="type">MyViewController</span>.onButtonTap, controlEvent: .<span class="type">TouchUpInside</span>)
}

<span class="func"><span class="keyword">func</span> <span class="title">onButtonTap</span><span class="params">()</span></span> {
    <span class="built_in">print</span>(<span class="string">"Button was tapped"</span>)
}
</code></pre><p>}</p>
<p>// 调用<br>MyViewController().onButtonTap()<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">###小结</span></span><br><span class="line"><span class="bullet">- </span>Curring让计算过程更清晰 函数式编程的有点初见端倪</span><br><span class="line"><span class="bullet">- </span>Curring让计算过程更独立 可重用</span><br><span class="line"><span class="bullet">- </span>Curring让计算功能扩展更方便</span><br><span class="line"><span class="bullet">- </span>Curring让Swift中Selector的重构可以实现</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="header">## Umeng分享遇到的小坑 -- 张超耀</span></span><br><span class="line"><span class="header">### 写在前面的话</span></span><br><span class="line"><span class="bullet">- </span>在iOS9下，系统默认会拦截对http协议接口的访问，因此无法获取http协议接口的数据。对Umeng来说，具体表现可能是，无法授权、分享、获取用户信息等。</span><br><span class="line"><span class="bullet">- </span>iOS9新建项目默认需要支持bitcode，而不支持bitcode的SDK会导致无法编译运行。[<span class="link_label">App Thining</span>](<span class="link_url">https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html#//apple_ref/doc/uid/TP40012582-CH35</span>)）</span><br><span class="line"></span><br><span class="line">[<span class="link_label">Umeng适配iOS9</span>](<span class="link_url">http://dev.umeng.com/social/ios/ios9</span>)</span><br><span class="line"></span><br><span class="line"><span class="header">### 针对iOS9的Https特性，解决方案</span></span><br><span class="line"><span class="bullet">- </span>Plan A: 暂时退回到http协议:</span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**1**</span>、在项目的info.plist中添加一个Key：NSAppTransportSecurity，类型为字典类型。</span><br><span class="line">&gt;<span class="strong">**2**</span>、然后给它添加一个Key：NSAllowsArbitraryLoads，类型为Boolean类型，值为YES；</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>Plan B：设置域。可以简单理解成，把不支持https协议的接口设置成http的接口</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**1**</span>、在项目的info.plist中添加一个Key：NSAppTransportSecurity，类型为字典类型。</span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**2**</span>、然后给它添加一个NSExceptionDomains，类型为字典类型；</span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**3**</span>、把需要的支持的域添加給NSExceptionDomains。其中域作为Key，类型为字典类型。</span><br><span class="line"></span><br><span class="line">&gt;<span class="strong">**4**</span>、每个域下面需要设置3个属性：NSIncludesSubdomains、		NSExceptionRequiresForwardSecrecy、		NSExceptionAllowsInsecureHTTPLoads。</span><br><span class="line"><span class="code">	均为Boolean类型，值分别为YES、NO、YES。</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="header">### 针对App Thinning</span></span><br><span class="line"></span><br><span class="line"><span class="header">### 添加Scheme白名单实现应用跳转（SSO等）</span></span><br><span class="line"><span class="bullet">- </span>问题描述：在iOS 9下涉及到平台客户端跳转，系统会自动到项目info.plist下检测是否设置平台Scheme。对于需要配置的平台，如果没有配置，就无法正常跳转平台客户端。因此要支持客户端的分享和授权等，需要配置Scheme名单。</span><br><span class="line"><span class="bullet">- </span>解决方案：</span><br><span class="line"></span><br><span class="line">具体方法：</span><br><span class="line">&gt;1、在项目的info.plist中添加一LSApplicationQueriesSchemes，类型为Array。</span><br><span class="line"></span><br><span class="line">&gt;2、然后给它添加一个需要支持的项目，类型为字符串类型</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="header">### 注意</span></span><br><span class="line"><span class="bullet">- </span>由于苹果审核政策需求，需要对未安装客户端平台进行隐藏，在设置QQ、微信AppID之后调用下面的方法，</span><br></pre></td></tr></table></figure></p>
<p>[UMSocialConfig hiddenNotInstallPlatforms:@[UMShareToQQ, UMShareToQzone, UMShareToWechatSession, UMShareToWechatTimeline]];</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> - but  这个接口只对默认分享面板平台有隐藏功能，自定义分享面板或登录按钮需要自己处理</span><br><span class="line"> </span><br><span class="line"><span class="bullet">- </span>对于自定义分享面板处理：</span><br><span class="line"><span class="code">	- UmengSDK已经嵌入相关API，直接用就好</span></span><br><span class="line"></span><br><span class="line"><span class="header">### 只要按照官方文档来，基本上就能马到成功（）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="header">##MarkDown 的 CSS 实现配置 - 杨志平</span></span><br><span class="line"></span><br><span class="line"><span class="header">####题目灵感来源</span></span><br><span class="line"><span class="blockquote">&gt; 起源于我们现有的博客引擎主题交互很不错，但是排版烂的要死 ，我水平有限这里只是浅显介绍实现修改我们的markdown编译器的一些排版样式</span></span><br><span class="line"></span><br><span class="line"><span class="header">#### 研究方向</span></span><br><span class="line"><span class="blockquote">&gt; 自定义一个非标准化，有其他多元素的MarkDown解析器 如下几点:</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-  </span>可选框</span><br><span class="line"> <span class="code">`- [ ] `</span></span><br><span class="line"><span class="bullet">- </span>本地图片索引，可控制对齐及大小 </span><br><span class="line"><span class="code">`![Alt text](http://path/to/img.jpg "optional title" 100x200)`</span></span><br><span class="line"><span class="code">`![Alt text](./1449756974449.png)`</span></span><br><span class="line"><span class="bullet">- </span>标签功能</span><br><span class="line"><span class="code">`@(Share)[css, Markdown]`</span></span><br><span class="line"><span class="bullet">- </span>代码高亮（不同语言）</span><br><span class="line"></span><br><span class="line"><span class="code">`swift`</span></span><br><span class="line"></span><br><span class="line"><span class="code">```</span> swift</span><br><span class="line"><span class="code">    private var majorModel = PickMajorModel()</span></span><br><span class="line"><span class="code">    private var subjectModel = OFFKeyNameModel()</span></span><br><span class="line"><span class="code">    required init?(coder aDecoder: NSCoder) &#123;</span></span><br><span class="line"><span class="code">        super.init(coder: aDecoder)</span></span><br><span class="line"><span class="code">    &#125;</span></span><br></pre></td></tr></table></figure>
<p><code>objectivec</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIScrollView</span> *scrollView = [[<span class="built_in">UIScrollView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, kScreenW, kScreenH)];</span><br><span class="line">scrollView<span class="variable">.showsVerticalScrollIndicator</span> = <span class="literal">NO</span>;</span><br><span class="line">[scrollView addSubview:<span class="keyword">self</span><span class="variable">.downMainView</span>];</span><br></pre></td></tr></table></figure>
<p><strong>有一种惨不忍睹的即视感</strong><br><img src="./1449756974449.png" alt="Alt text"></p>
<h3 id="MarkDown来源及实现">MarkDown来源及实现</h3><blockquote>
<p>Markdown is a plain text format for writing structured documents, based on conventions used for indicating formatting in email and usenet posts. It was developed in 2004 by John Gruber, who wrote the first markdown-to-html converter in Perl, and it soon became widely used in websites. By 2014 there were dozens of implementations in many languages.</p>
</blockquote>
<p><code>见知乎上回答</code><br><a href="http://www.zhihu.com/question/28756456" target="_blank" rel="external">实现一个markdown解析器需要具备那些知识</a></p>
<h3 id="如何简单的改善文字编排的效果">如何简单的改善文字编排的效果</h3><h5 id="更换博客主题（简单粗暴）">更换博客主题（简单粗暴）</h5><blockquote>
<p>我们使用的博客引擎Hexo来举例，列举下面三个主题</p>
<ul>
<li>landscape</li>
<li>hexo-theme-vno-master</li>
<li>hexo-theme-yilia-master</li>
</ul>
</blockquote>
<h5 id="更换MarkDown编译器的主题">更换MarkDown编译器的主题</h5><blockquote>
<p>以 <strong><em>Mou</em></strong> 举例子，它提供了多套markdown语法下的排版样式<br>手动新创建一个CSS文本布局配置 <strong><em>Blog</em></strong><br><img src="./1449768288128.png" alt="Alt text"></p>
</blockquote>
<h4 id="CSS配置文件修改">CSS配置文件修改</h4><p>详细配置参数如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">html</span> <span class="rules">&#123; <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">62.5%</span></span></span>; &#125;</span></span><br><span class="line"><span class="tag">html</span>, <span class="tag">body</span> <span class="rules">&#123; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100%</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">body</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-family</span>:<span class="value"> Helvetica, Arial, sans-serif</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">150%</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">line-height</span>:<span class="value"> <span class="number">1.3</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#f6e6cc</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">700px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">margin</span>:<span class="value"> auto</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#27221a</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span> <span class="number">30px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>多级标题配置</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">h1</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">28px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> black</span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h2</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">24px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border-bottom</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#cccccc</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> black</span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h3</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">18px</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h4</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">16px</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h5</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">14px</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h6</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#777777</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">14px</span></span></span>; &#125;</span></span><br></pre></td></tr></table></figure>
<p>表格</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">table</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span></span></span>;<span class="rule"><span class="attribute">border-collapse</span>:<span class="value"> collapse</span></span>; &#125;</span></span><br><span class="line">  <span class="tag">table</span> <span class="tag">tr</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">border-top</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#cccccc</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> white</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span></span></span>; &#125;</span></span><br><span class="line">    <span class="tag">table</span> <span class="rule"><span class="attribute">tr</span>:<span class="value"><span class="function">nth-child</span>(<span class="number">2</span>n) &#123;</span><br><span class="line">      background-color: <span class="hexcolor">#f8f8f8</span></span></span>; &#125;</span><br><span class="line">    <span class="tag">table</span> <span class="tag">tr</span> <span class="tag">th</span> <span class="rules">&#123;</span><br><span class="line">      <span class="rule"><span class="attribute">font-weight</span>:<span class="value"> bold</span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#cccccc</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">6px</span> <span class="number">13px</span></span></span>; &#125;</span></span><br><span class="line">    <span class="tag">table</span> <span class="tag">tr</span> <span class="tag">td</span> <span class="rules">&#123;</span><br><span class="line">      <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#cccccc</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">6px</span> <span class="number">13px</span></span></span>; &#125;</span></span><br><span class="line">    <span class="tag">table</span> <span class="tag">tr</span> <span class="rule"><span class="attribute">th </span>:<span class="value">first-child, table tr td :first-child &#123;</span><br><span class="line">      margin-top: <span class="number">0</span></span></span>; &#125;</span><br><span class="line">    <span class="tag">table</span> <span class="tag">tr</span> <span class="rule"><span class="attribute">th </span>:<span class="value">last-child, table tr td :last-child &#123;</span><br><span class="line">      margin-bottom: <span class="number">0</span></span></span>; &#125;</span><br></pre></td></tr></table></figure>
<p>代码高亮</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">code</span>, <span class="tag">tt</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> <span class="number">2px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span> <span class="number">5px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">white-space</span>:<span class="value"> nowrap</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#eaeaea</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#f8f8f8</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">3px</span></span></span>; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">pre</span> <span class="tag">code</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">white-space</span>:<span class="value"> pre</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> none</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background</span>:<span class="value"> transparent</span></span>; &#125;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享- 前端入门篇" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/02/周精益分享- 前端入门篇/" class="article-date">
  	<time datetime="2015-12-02T10:30:00.000Z" itemprop="datePublished">2015-12-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/02/周精益分享- 前端入门篇/">周精益分享 - 前端入门篇</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Ruby_on_Rails_初体验_-_王胜">Ruby on Rails 初体验 - 王胜</h2><h3 id="使用命令行快速创建应用的步骤">使用命令行快速创建应用的步骤</h3><ul>
<li><p>创建应用程序</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$rails new hello -d mysql</span><br></pre></td></tr></table></figure>
<p><strong>备注</strong> 这里演示使用mysql作为数据持久层</p>
</li>
<li><p>浏览hello world界面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$cd hello&#10;$rake db:create RAILS_ENV=&#39;development&#39; // &#21019;&#24314;&#24320;&#21457;&#25968;&#25454;&#24211;&#10;$bin/rails server</span><br></pre></td></tr></table></figure>
<p><strong>备注</strong> 由于这里的rails版本是4.2.1，与msqyl2的最高版本有不兼容行，所以需要手动将Gemfile中mysql2降级。降级之后执行bundle install。</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem <span class="string">'mysql2'</span> -&gt; gem <span class="string">'mysql2'</span>, <span class="string">'~&gt; 0.3.18'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用脚手架，创建模型、数据迁移脚本以及控制器和试图</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$bin/rails generate scaffold Person name:string age:integer</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行数据迁移</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$bin/rake db:migrate RAILS_ENV=development</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动应用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$bin/rails server</span><br></pre></td></tr></table></figure>
</li>
<li><p>浏览效果</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">http:</span><span class="comment">//localhost:3000/people</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>备注</strong></p>
<p>此演示项目，ruby、gems和Rails的版本信息如下:</p>
<ul>
<li>ruby: 2.0.0p481</li>
<li>rubygems: 2.4.5</li>
<li>rails: 4.2.1</li>
</ul>
<p>参考：</p>
<ul>
<li><a href="http://guides.rubyonrails.org/command_line.html" target="_blank" rel="external">rubyonrails.org</a></li>
</ul>
<h2 id="Express_for_Node-js_上手演示_-_曾铭_（先占坑）">Express for Node.js 上手演示 - 曾铭 （先占坑）</h2><h2 id="矢量图在Android_上应用_-_王进">矢量图在Android 上应用 - 王进</h2><h3 id="VectorDrawable">VectorDrawable</h3><p>示例：<br><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">vector</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">        &lt;!<span class="attribute">--</span>  <span class="attribute">intrinsic</span>  <span class="attribute">size</span>  <span class="attribute">of</span>  <span class="attribute">the</span>  <span class="attribute">drawable</span>  <span class="attribute">--</span>&gt;</span></span><br><span class="line">        android:height="300dp"</span><br><span class="line">        android:width="300dp"</span><br><span class="line">        <span class="comment">&lt;!-- size of the virtual canvas --&gt;</span></span><br><span class="line">        android:viewportHeight="40"</span><br><span class="line">        android:viewportWidth="40"</span><br><span class="line">        &gt;</span><br><span class="line">        <span class="tag">&lt;<span class="title">path</span> <span class="attribute">android:fillColor</span>=<span class="value">"#ff00ff"</span></span><br><span class="line">                <span class="attribute">android:pathData</span>=<span class="value">"M20.5,9.5</span><br><span class="line">                        c-1.955,0,-3.83,1.268,-4.5,3</span><br><span class="line">                        c-0.67,-1.732,-2.547,-3,-4.5,-3</span><br><span class="line">                        C8.957,9.5,7,11.432,7,14</span><br><span class="line">                        c0,3.53,3.793,6.257,9,11.5</span><br><span class="line">                        c5.207,-5.242,9,-7.97,9,-11.5</span><br><span class="line">                        C25,11.432,23.043,9.5,20.5,9.5z"</span></span><br><span class="line">                /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">vector</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<h3 id="SVG→Vector">SVG→Vector</h3><p>Android并不原生支持读取常见的向量文件格式，如ＳＶＧ<br>（主要是缺少ｃｓｓ支持），但是支持相同路径数据语法，<br>所以ＳＶＧ资源需要经过一定的转换；</p>
<h3 id="使用SVG_Path_Data">使用SVG Path Data</h3><ul>
<li>M： move to 移动绘制点</li>
<li>L：line to 直线</li>
<li>Z：close 闭合</li>
<li>C：cubic bezier 三次贝塞尔曲线</li>
<li>Q：quatratic bezier 二次贝塞尔曲线</li>
<li>A：ellipse 圆弧</li>
</ul>
<blockquote>
<p>每个命令都有大小写形式，大写代表后面的参数是绝对坐标，小写表示相对坐标。参数之间用空格或逗号隔开</p>
</blockquote>
<p><strong>命令详解：</strong></p>
<ul>
<li>M (x y) 移动到x,y</li>
<li>L (x y) 直线连到x,y，还有简化命令H(x) 水平连接、V(y)垂直连接</li>
<li>Z，没有参数，连接起点和终点</li>
<li>C(x1 y1 x2 y2 x y)，控制点x1,y1 x2,y2，终点x,y</li>
<li>Q(x1 y1 x y)，控制点x1,y1，终点x,y</li>
<li>A(rx ry x-axis-rotation large-arc-flag sweep-flag x y) <ul>
<li>rx ry 椭圆半径 </li>
<li>x-axis-rotation x轴旋转角度 </li>
<li>large-arc-flag 为0时表示取小弧度，1时取大弧度 </li>
<li>sweep-flag 0取逆时针方向，1取顺时针方向<br><img src="http://static.oschina.net/uploads/img/201510/01095231_IR6O.svg" alt=""></li>
</ul>
</li>
</ul>
<p>详细参考：<a href="http://www.w3.org/TR/SVG11/paths.html#PathData" target="_blank" rel="external">http://www.w3.org/TR/SVG11/paths.html#PathData</a></p>
<h3 id="Icon_Font">Icon Font</h3><p>解决矢量图低版本不兼容问题</p>
<p>详细参考：<br>1,<a href="http://blog.csdn.net/a345017062/article/details/46455745" target="_blank" rel="external">http://blog.csdn.net/a345017062/article/details/46455745</a><br>2,<a href="http://blog.csdn.net/goodlixueyong/article/details/41448483" target="_blank" rel="external">http://blog.csdn.net/goodlixueyong/article/details/41448483</a></p>
<h2 id="WordPress快速建站_—杨俊构">WordPress快速建站 —杨俊构</h2><h3 id="准备工具">准备工具</h3><ul>
<li><p>服务器php套件（ Nginx+PHP7.0）： <a href="http://www.upupw.net/" target="_blank" rel="external">UPUPW绿色服务器</a></p>
</li>
<li><p>WordPress代码包：<a href="https://cn.wordpress.org/" target="_blank" rel="external">wordpress-4.3.1-zh_CN</a></p>
</li>
</ul>
<h3 id="操作步骤">操作步骤</h3><ul>
<li><p>配置服务器和数据库</p>
<ol>
<li>解压UPUPW_NP7.0-1511.7z 到本地目录</li>
<li>打开解压包后的upupw.exe配置平台。<br><img src="http://7xohph.com1.z0.glb.clouddn.com/05120101.jpg" alt=""></li>
<li>输入“S1”开启全部服务</li>
<li>打开地址 <a href="http://127.0.0.1/" target="_blank" rel="external">http://127.0.0.1/</a> 会看到UPUPWPHP探针页面<br><img src="http://7xohph.com1.z0.glb.clouddn.com/05120103.jpg" alt=""></li>
<li>打开地址 <a href="http://127.0.0.1/pmd/" target="_blank" rel="external">http://127.0.0.1/pmd/</a> 配置mysql数据库（默认用户名密码都是root）</li>
<li>新建数据库，用户名，密码</li>
<li>打开地址 <a href="http://127.0.0.1/" target="_blank" rel="external">http://127.0.0.1/</a> 使用数据库连接测试连接数据库是否正常</li>
</ol>
</li>
<li><p>安装配置wordpress</p>
<ol>
<li>解压wordpress-4.3.1-zh_CN.zip压缩包</li>
<li>将wordpress文件夹拷贝到UPUPW发布根目录/htdocs文件夹下</li>
<li>打来地址<a href="http://127.0.0.1/wordpress，根据开始安装" target="_blank" rel="external">http://127.0.0.1/wordpress，根据开始安装</a></li>
<li>输入刚才配置的数据库名，用户名，密码，点击提交进行</li>
<li>设置站点标题，后台登陆用户名，后台密码，邮件地址完成安装</li>
<li>再次打开地址<a href="http://127.0.0.1/wordpress测试安装完成" target="_blank" rel="external">http://127.0.0.1/wordpress测试安装完成</a><br><img src="http://7xohph.com1.z0.glb.clouddn.com/05120105.jpg" alt=""></li>
</ol>
</li>
</ul>
<h3 id="WordPress相关资源">WordPress相关资源</h3><ul>
<li><p>推荐主题 ：<a href="http://www.weisay.com/blog/" target="_blank" rel="external">威言威语</a>     <a href="http://www.prower.cn/" target="_blank" rel="external">prower</a></p>
</li>
<li><p>推荐插件 ： <a href="http://duoshuo.com/" target="_blank" rel="external">多说</a> （评论快速提交，文章聚合发布）   <a href="http://developer.qiniu.com/download/index.html" target="_blank" rel="external">七牛镜像存储wordpress 插件</a>     <a href="http://www.youpzt.com/267.html" target="_blank" rel="external">youpzt-optimizer</a>（网站优化工具）</p>
</li>
<li><p><a href="http://www.oschina.net/news/55174/nextapp-opensource" target="_blank" rel="external">NextApp</a> —— 开源的WordPress手机博客 App 自动生成系统</p>
</li>
</ul>
<h2 id="spring_aop_简单介绍">spring aop 简单介绍</h2><h2 id="51offer_Android重构之Architecture_-_xpleemoon">51offer Android重构之Architecture - xpleemoon</h2><h3 id="历史">历史</h3><ul>
<li>我们的app经历了一次重构，在重构过程中将IDE切换到Android Studio，并且编译脚本从Ant切换到了Gradle。</li>
<li>不介绍IDE和Gradle的优势，主要介绍重构后app的Architecture相关部分。</li>
</ul>
<blockquote>
<p>从0到1是一个开始，再从1到N又是另一个开始。</p>
</blockquote>
<h3 id="Architecture">Architecture</h3><ul>
<li>当前我们的结构主要为4层：<ol>
<li>app</li>
<li>core</li>
<li>lib</li>
<li>model</li>
</ol>
</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/X3.jpg" alt="project结构"></p>
<ul>
<li>app依赖core，而core依赖lib和model。随着以后的业务发展、产品迭代或者有更好的结构划分，会再做调整。</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/X1.jpg" alt="module依赖"></p>
<h3 id="app——展现层（presention）">app——展现层（presention）</h3><ul>
<li>用于页面展现，主要包含MVP模式中的VP。我们对V采用接口的方式去定义，然后让Activity或者Fragment去实现V接口，这样我们就达到接口编程的目的，P只需要关注V接口即可。以注册中的地区列表页面为例</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/X4.jpg" alt="VP"></p>
<ul>
<li>V</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 地区view，MVP－V</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IRegionView</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 搜索更新</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">search2Update</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>P</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 国家地区，MVP－P</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegionPresenter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Region&gt; mRegions = OFRRegionHelper.getRegions();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 获取地区列表</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Region&gt; <span class="title">getRegions</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mRegions;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 搜索</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> regionView</span><br><span class="line">     * <span class="doctag">@param</span> searchRegion</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">search</span><span class="params">(@NonNull IRegionView regionView, String searchRegion)</span> </span>&#123;</span><br><span class="line">        mRegions.clear();</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(searchRegion)) &#123;</span><br><span class="line">            mRegions.addAll(OFRRegionHelper.getRegions());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mRegions.addAll(OFRRegionHelper.searchRegions(searchRegion));</span><br><span class="line">        &#125;</span><br><span class="line">        regionView.search2Update();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>另外，我们的app有太多的业务逻辑，所以我们也使用了比较多的策略模式，方便以后的扩展和维护。比如不同的国家，它在意向单展现时就有不同的表现：<ul>
<li>可以同时选择的最多意向单数量</li>
<li>每个学校可以同时选择的最多专业数量 </li>
<li>意向单名字</li>
</ul>
</li>
<li>于是，我们就对此采用了策略模式</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/X2.jpg" alt="国家意向单策略图"></p>
<ul>
<li>国家意向单策略接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 国家策略</span><br><span class="line"> * &lt;ul&gt;</span><br><span class="line"> * &lt;li&gt;不同国家可选的意向单数量不同，具体见&#123;<span class="doctag">@link</span> #maxCount2Select()&#125;&lt;/li&gt;</span><br><span class="line"> * &lt;li&gt;不同国家的学校专业可选数量不同，具体见&#123;<span class="doctag">@link</span> #maxCountOfPerSchool2Select()&#125;&lt;/li&gt;</span><br><span class="line"> * &lt;/ul&gt;</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ICountryPurpose</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 国家可以同时选择的最多意向单数量</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxCount2Select</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 每个学校可以同时选择的最多专业数量</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxCountOfPerSchool2Select</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 意向单名字，目前可用名字为：</span><br><span class="line">     * &lt;ol&gt;</span><br><span class="line">     * &lt;li&gt;专业&lt;/li&gt;</span><br><span class="line">     * &lt;li&gt;入学时间，当前只限日本&lt;/&gt;</span><br><span class="line">     * &lt;/ol&gt;</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> ctx</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">(@NonNull Context ctx)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="core">core</h3><ul>
<li>核心层，主要用于应用相关的URL拼接、图片加载、网络请求、json解析、第三方平台、配置和工具。</li>
</ul>
<h3 id="lib">lib</h3><ul>
<li>通用库层，不依赖于应用的任何业务，方便快速的移植到其它项目.</li>
</ul>
<h3 id="model">model</h3><ul>
<li>数据层，作为MVP的M，用于应用的数据模型.</li>
</ul>
<h2 id="简单HTML5_吴明">简单HTML5 吴明</h2><ul>
<li><a href="http://www.17sucai.com/pins/demoshow/4583" target="_blank" rel="external">烟火效果</a></li>
<li><a href="http://www.html5tricks.com/demo/html5-css3-404-animation/index.html" target="_blank" rel="external">404动画</a></li>
<li><a href="http://keleyi.com/keleyi/phtml/html5/31.htm" target="_blank" rel="external">爱心树</a></li>
<li>开发ide storm</li>
<li>目录结构<ul>
<li>dist:第三库存放地方，以下为存放指定文件类型目录<ul>
<li>css</li>
<li>js</li>
<li>doc</li>
<li>img</li>
</ul>
</li>
<li>src:项目指定文件类型目录<ul>
<li>css</li>
<li>js</li>
<li>doc</li>
<li>img  </li>
</ul>
</li>
</ul>
</li>
<li>简单代码</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--html5网页声明--&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>mobile<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 此处还可以插入其他meta,样式单等信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--页面部分--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span>现实是残酷的,别做梦,从hello word开始吧!<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">canvas</span> <span class="attribute">id</span>=<span class="value">"canvas"</span>&gt;</span>不支持html5<span class="tag">&lt;/<span class="title">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="xml"></span><br><span class="line">    <span class="comment">&lt;!-- 获取内容中id为canvas的元素--&gt;</span></span><br><span class="line">    var canvas = document.getElementById('canvas');</span><br><span class="line">//    获取canvas的环境,</span><br><span class="line">    var ctx = canvas.getContext('2d');</span><br><span class="line">//      填充的样式为红色</span><br><span class="line">    ctx.fillStyle = '#ff0000';</span><br><span class="line">    ctx.st//    画一个矩形,位置x,y,w,h</span><br><span class="line">    ctx.fillRect(0, 0, 600, 100);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>参考链接<ul>
<li><a href="http://caniuse.com/" target="_blank" rel="external">链接一</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML" target="_blank" rel="external">链接二</a></li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-后端开发" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/25/周精益分享-后端开发/" class="article-date">
  	<time datetime="2015-11-25T10:30:00.000Z" itemprop="datePublished">2015-11-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/25/周精益分享-后端开发/">周精益分享 - 后端开发</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Swift学习之二_-_张超耀">Swift学习之二 - 张超耀</h2><h3 id="深度理解”?”_&amp;&amp;_“!”">深度理解”?” &amp;&amp; “!”</h3> <figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Optional</span>其实是个<span class="keyword">enum</span>，里面有<span class="type">None</span>和Some两种类型。 nil就是<span class="type">Optional</span>.<span class="type">None</span>, 非nil就是<span class="type">Optional</span>.Some, 然后会通过Some(T)包装（wrap）原始值，这也是为什么在使用<span class="type">Optional</span>的时候要拆包（从<span class="keyword">enum</span>里取出来原始值）的原因。声明为<span class="type">Optional</span>只需要在类型后面紧跟一个<span class="string">"?"</span>即可</span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> strValue</span>: String?  <span class="comment">//?相当于下面这种写法的语法糖</span></span><br><span class="line"><span class="variable"><span class="keyword">var</span> strValue1</span>: Optional<span class="type">&lt;Int&gt;</span></span><br></pre></td></tr></table></figure>
<p> 一旦声明为Optional的，如果不显式的赋值就会有个默认值nil。判断一个Optional的值是否有值，可以用if来判断：</p>
<figure class="highlight cal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (strValue != nil) &#123;</span><br><span class="line">    //<span class="keyword">do</span> sth <span class="keyword">with</span> strValue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>怎么使用Optional值呢？<br>在使用Optional值的时候只前面需要加上一个”?”，就是这么简单。 </p>
<ul>
<li>这个”？”什么意思？：<br> 1、  询问是否响应后面这个方法，如果是nil值，也就是Optional.None，就不响应后面的方法，直接跳过，<br> 2、 如果有值，就是Optional.Some，可能就会拆包(unwrap)，然后对拆包后的值执行后面的操作，比如</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value = strValue?.hashValue</span><br></pre></td></tr></table></figure>
<ul>
<li><p>strValue是Optional的字符串，如果strValue是nil，则hashValue也为nil，如果strValue不为nil，hashValue就是strValue字符串的值</p>
</li>
<li><p>到这里我们看到了?的两种使用场景:</p>
<pre><code><span class="number">1.</span>声明<span class="type">Optional</span>值变量
<span class="number">2.</span>用在对<span class="type">Optional</span>值操作中，用来判断是否能响应后面的操作
</code></pre></li>
<li>对于Optional值，不能直接进行操作，否则会报错</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value1 = strValue!.hashValue</span><br></pre></td></tr></table></figure>
<p> 上面错误提示需要拆包(unwrap)后才能得到值，然后才能对其操作，那怎么来拆包呢？拆包提到了几种方法，一种是Optional Binding</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">str =</span> strValue &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">hashValue =</span> str.hashValue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还有一种是在具体的操作前添加”!”符号。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">hash</span>Value2 = strValue!.hashValue</span><br></pre></td></tr></table></figure>
<p> 这里的”!”表示<strong>我确定肯定这里的的strValue一定是非nil的，随便用吧，木事de</strong> 就像下面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (strValue != nil) &#123;</span><br><span class="line">    <span class="built_in">let</span> <span class="built_in">hash</span>Value = strValue!.hashValue</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&#123;&#125;</span>里的strValue一定是非<span class="keyword">nil</span>的，所以就能直接加上!，强制拆包(unwrap)并执行后面的操作。</span><br><span class="line">当然如果不加判断，strValue不小心为<span class="keyword">nil</span>的话，就会出错，crash掉。</span><br></pre></td></tr></table></figure>
<p><strong><em> 51offer例子解释『隐式拆包的Optional』</em></strong></p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这种是特殊的<span class="type">Optional</span>，称为Implicitly Unwrapped Optionals, 直译就是隐式拆包的<span class="type">Optional</span>，就等于说你每次对这种类型的值操作时，都会自动在操作前补上一个<span class="comment">!进行拆包，然后在执行后面的操作，当然如果该值是nil，也一样会报错crash掉。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>“!”也有两种使用场景<pre><code><span class="number">1</span>、强制对<span class="type">Optional</span>值进行拆包(unwrap)
<span class="number">2</span>、声明Implicitly Unwrapped Optionals值，一般用于类中的属性
</code></pre></li>
</ul>
<h3 id="swift_断言">swift 断言</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">断言（Assertions）</span><br><span class="line">Optionals可以让我们检测值是否存在。在某些情况下，如果某个值不存在或者没有提供特定的满足条件，代码不应该继续往下执行。</span><br><span class="line">在这些情况下，可以使用触发断言来终止执行并提供调试。</span><br><span class="line">断言是在运行时检测条件是否为<span class="literal">true</span>,如果为<span class="literal">true</span>,就继续往下执行，否则就在这里中断。</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">var</span> jobs = <span class="string">"我是一个好人"</span></span><br><span class="line"><span class="function"><span class="title">assert</span><span class="params">(jobs == <span class="string">"我是一个好人"</span>, <span class="string">"我是一个好人"</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">assert</span><span class="params">(jobs == <span class="string">"我是一个坏人"</span>, <span class="string">"我是一个坏人么？"</span>)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">什么时候使用断言呢？</span><br><span class="line">包含下面的情况时使用断言：</span><br><span class="line">        <span class="number">1</span>、整型下标索引作为值传给自定义索引实现的参数时，但下标索引值不能太低也不能太高时，使用断言</span><br><span class="line">      **<span class="number">2</span>、传值给函数但如果这个传过来的值无效时，函数就不能完成功能时，使用断言。</span><br><span class="line">        <span class="number">3</span>、Optional值当前为<span class="keyword">nil</span>，但是后面的代码成功执行的条件是要求这个值不能为<span class="keyword">nil</span>，使用断言</span><br></pre></td></tr></table></figure>
<h2 id="IM中输入框的优化方案实现">IM中输入框的优化方案实现</h2><p><code>以下图的输入框为例</code></p>
<p><img src="https://cloud.githubusercontent.com/assets/9360037/11319390/0ad964a8-90b0-11e5-90aa-9d2ca1fa548e.png" alt="stand"></p>
<h4 id="输入框的呈现方式选择">输入框的呈现方式选择</h4><p><code>以下两个方法对比</code></p>
<ul>
<li>Keyboard的inputAccessoryView</li>
</ul>
<blockquote>
<p>相对推荐的方法，有更好的丰富的交互效果</p>
<p>可以与scrollView的一些属性直接绑定</p>
</blockquote>
<ul>
<li>InputView的frame适应</li>
</ul>
<blockquote>
<p>传统的方法</p>
<p>优点：灵活控制显示位置</p>
<p>缺点：过多的计算frame</p>
</blockquote>
<h3 id="InputAccessoryView方式">InputAccessoryView方式</h3><p><a href="https://github.com/ZhipingYang/UUKeyboardInputView" target="_blank" rel="external">案例见GitHub的Demo</a></p>
<blockquote>
<p>iOS的输入源都有输入源（keyboard及keyboard的配件InputAccessoryView），那通常的方法是输入源控件（Textfield、TextView等）使用一般的<code>InputView的frame适应</code></p>
</blockquote>
<p><strong>解释几个技巧点</strong></p>
<ul>
<li>InputView（ 输入源 ）的父视图作为该InputView的InputAccessoryView，要避免相互引用</li>
<li>巧用第三方不可见的InputView在适当时间点转移第一响应者给可见的InputView</li>
<li>完成编辑时去除第一响应者（注意iOS9下键盘响应逻辑视图层级都发生了变化）</li>
</ul>
<p><strong>主要代码</strong></p>
<p><img src="https://cloud.githubusercontent.com/assets/9360037/11436829/4b2d95f2-9523-11e5-8d66-8745354c0e99.png" alt="simulator screen shot nov 27 2015 4 17 38 pm"></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单例初始化</span></span><br><span class="line">+ (U<span class="built_in">UInputAccessoryView</span>*)sharedView &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> once;</span><br><span class="line">    <span class="keyword">static</span> U<span class="built_in">UInputAccessoryView</span> *sharedView;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;once, ^ &#123;</span><br><span class="line">        sharedView = [[U<span class="built_in">UInputAccessoryView</span> alloc] init];</span><br><span class="line">        sharedView-&gt;btnBack = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">        sharedView-&gt;btnBack<span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, U<span class="built_in">UIAV_MAIN_W</span>, U<span class="built_in">UIAV_MAIN_H</span>);</span><br><span class="line">        [sharedView-&gt;btnBack addTarget:sharedView action:<span class="keyword">@selector</span>(dismiss) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">        sharedView-&gt;btnBack<span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        <span class="built_in">UIToolbar</span> *toolbar = [[<span class="built_in">UIToolbar</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, U<span class="built_in">UIAV_MAIN_W</span>, <span class="number">44</span>)];</span><br><span class="line">        sharedView-&gt;inputView = [[<span class="built_in">UITextField</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Edge_Vert</span>, U<span class="built_in">UIAV_MAIN_W</span>-U<span class="built_in">UIAV_Btn_W</span>-<span class="number">4</span>*U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Btn_H</span>)];</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.borderStyle</span> = <span class="built_in">UITextBorderStyleRoundedRect</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.returnKeyType</span> = <span class="built_in">UIReturnKeyDone</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.clearButtonMode</span> = <span class="built_in">UITextFieldViewModeWhileEditing</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.enablesReturnKeyAutomatically</span> = <span class="literal">YES</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.delegate</span> = sharedView;</span><br><span class="line">        [toolbar addSubview:sharedView-&gt;inputView];</span><br><span class="line">        sharedView-&gt;assistView = [[<span class="built_in">UITextField</span> alloc]init];</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.delegate</span> = sharedView;</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.returnKeyType</span> = <span class="built_in">UIReturnKeyDone</span>;</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.enablesReturnKeyAutomatically</span> = <span class="literal">YES</span>;</span><br><span class="line">        [sharedView-&gt;btnBack addSubview:sharedView-&gt;assistView];</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.inputAccessoryView</span> = toolbar;</span><br><span class="line">        sharedView-&gt;BtnSave = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">        sharedView-&gt;BtnSave<span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(U<span class="built_in">UIAV_MAIN_W</span>-U<span class="built_in">UIAV_Btn_W</span>-<span class="number">2</span>*U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Edge_Vert</span>, U<span class="built_in">UIAV_Btn_W</span>, U<span class="built_in">UIAV_Btn_H</span>);</span><br><span class="line">        sharedView-&gt;BtnSave<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        [sharedView-&gt;BtnSave setTitle:<span class="string">@"确定"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        [sharedView-&gt;BtnSave setTitleColor:[<span class="built_in">UIColor</span> redColor] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        [sharedView-&gt;BtnSave addTarget:sharedView action:<span class="keyword">@selector</span>(Done) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">        [toolbar addSubview:sharedView-&gt;BtnSave];</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="built_in">CGRectGetHeight</span>([<span class="built_in">UIScreen</span> mainScreen]<span class="variable">.bounds</span>);</span><br><span class="line">	<span class="keyword">return</span> sharedView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>实现逻辑代码</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)showKeyboardType:(<span class="built_in">UIKeyboardType</span>)type content:(<span class="built_in">NSString</span> *)content Block:(U<span class="built_in">UInputAccessoryBlock</span>)block</span><br><span class="line">&#123;</span><br><span class="line">    [[U<span class="built_in">UInputAccessoryView</span> sharedView] show:block</span><br><span class="line">                               keyboardType:type</span><br><span class="line">                                    content:content];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)show:(U<span class="built_in">UInputAccessoryBlock</span>)block keyboardType:(<span class="built_in">UIKeyboardType</span>)type content:(<span class="built_in">NSString</span> *)content</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIWindow</span> *window=[<span class="built_in">UIApplication</span> sharedApplication]<span class="variable">.keyWindow</span>;</span><br><span class="line">    [window addSubview:btnBack];</span><br><span class="line"></span><br><span class="line">    inputBlock = block;</span><br><span class="line">    inputView<span class="variable">.text</span> = content;</span><br><span class="line">    inputView<span class="variable">.keyboardType</span> = type;</span><br><span class="line">    assistView<span class="variable">.keyboardType</span> = type;</span><br><span class="line">    [assistView becomeFirstResponder];</span><br><span class="line">    shouldDismiss = <span class="literal">NO</span>;</span><br><span class="line">    </span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserverForName:<span class="built_in">UIKeyboardDidShowNotification</span></span><br><span class="line">                                                      object:<span class="literal">nil</span></span><br><span class="line">                                                       queue:<span class="literal">nil</span></span><br><span class="line">                                                  usingBlock:^(<span class="built_in">NSNotification</span> * _Nonnull note) &#123;</span><br><span class="line">                                                      <span class="keyword">if</span> (!shouldDismiss) &#123;</span><br><span class="line">                                                          [inputView becomeFirstResponder];</span><br><span class="line">                                                      &#125;</span><br><span class="line">                                                  &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)Done</span><br><span class="line">&#123;</span><br><span class="line">    [inputView resignFirstResponder];</span><br><span class="line">    !inputBlock ?: inputBlock(inputView<span class="variable">.text</span>);</span><br><span class="line">    [<span class="keyword">self</span> dismiss];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)textFieldShouldReturn:(<span class="built_in">UITextField</span> *)textField</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span> Done];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)dismiss</span><br><span class="line">&#123;</span><br><span class="line">    shouldDismiss = <span class="literal">YES</span>;</span><br><span class="line">    [inputView resignFirstResponder];</span><br><span class="line">    [btnBack removeFromSuperview];</span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] removeObserver:<span class="keyword">self</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="InputView的frame适应">InputView的frame适应</h3><p><a href="https://github.com/ZhipingYang/UUChatSwift/blob/master/UUChatTableViewSwift/ChatTableViewController.swift#L123" target="_blank" rel="external">案例见GitHub的Demo</a></p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 键盘响应布局</span></span><br><span class="line">@objc func keyboardFrameChanged<span class="params">(notification: NSNotification)</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">let</span> dict = NSDictionary<span class="params">(dictionary: notification.userInfo!)</span></span><br><span class="line">    <span class="built_in">let</span> keyboardValue = dict.objectForKey<span class="params">(UIKeyboardFrameEndUserInfoKey)</span> as<span class="built_in">!</span> NSValue</span><br><span class="line">    <span class="built_in">let</span> bottomDistance = mainScreenSize<span class="params">()</span>.height - keyboardValue.CGRectValue<span class="params">()</span>.origin.y</span><br><span class="line">    <span class="built_in">let</span> duration = Double<span class="params">(dict.objectForKey<span class="params">(UIKeyboardAnimationDurationUserInfoKey)</span> as! NSNumber)</span></span><br><span class="line">    </span><br><span class="line">    UIView.animateWithDuration<span class="params">(duration, animations: &#123;</span><br><span class="line">        self.inputViewConstraint!.constant = -bottomDistance</span><br><span class="line">        self.view.layoutIfNeeded<span class="params">()</span></span><br><span class="line">        &#125;, completion: &#123;</span><br><span class="line">            <span class="params">(value: Bool)</span> in</span><br><span class="line">            self.chatTableView.scrollToBottom<span class="params">(animation: <span class="literal">true</span>)</span></span><br><span class="line">    &#125;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ScrollView下拉动态修改keyboard（InputView）的frame">ScrollView下拉动态修改keyboard（InputView）的frame</h3><p><strong>常见隐藏keyboard的一些方式</strong></p>
<ul>
<li>TouchBeigin</li>
<li>DidDrag</li>
<li>EndDrag</li>
<li>Interactive</li>
</ul>
<p><strong>iOS7 开始，ScrollView提供</strong></p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@available</span>(iOS <span class="number">7.0</span>, *)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> UIScrollViewKeyboardDismissMode : Int &#123;</span><br><span class="line">    <span class="keyword">case</span> None</span><br><span class="line">    <span class="keyword">case</span> OnDrag <span class="comment">// dismisses the keyboard when a drag begins</span></span><br><span class="line">    <span class="keyword">case</span> Interactive <span class="comment">// the keyboard follows the dragging touch off screen, and may be pulled upward again to cancel the dismiss</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所以在ScrollView上添加<code>scrollView.keyboardDismissMode = UIScrollViewKeyboardDismissMode.Interactive</code>就可以了。<br>效果详见iOS7及以上原生设备的短信滑动消失键盘的交互</p>
<h2 id="写负责任的代码之异常处理_-_曾铭">写负责任的代码之异常处理 - 曾铭</h2><blockquote>
<p>千万不要以为你可以忽视这个特殊的返回值，因为它是一种“可能性”。代码漏掉任何一种可能出现的情况，都可能产生意想不到的灾难性结果。</p>
</blockquote>
<ul>
<li>重视代码（及业务）逻辑的异常情况，将其视为『正常流程』的一部分。</li>
</ul>
<ul>
<li>重视函数的抛出异常，将其视为返回值之一（union类型）。</li>
</ul>
<h3 id="政策之后的对策">政策之后的对策</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">foo</span><span class="params">()</span> <span class="keyword">throws</span> MyException </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>catch 全部异常</li>
</ul>
<ul>
<li>try 全部代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  ... foo() ...</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="我们_API_为什么难调试">我们 API 为什么难调试</h4><ul>
<li>Service 层未声明抛出异常，也会抛出异常</li>
<li>抛出的异常 API 层记入日志，向上抛时却丢弃了异常信息</li>
<li>API 层方法代码全部 try，很难定位到是哪一行出问题</li>
</ul>
<h3 id="推荐的对策">推荐的对策</h3><ul>
<li>只 catch 指定的 exception</li>
<li>try 进可能的小</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  foo();</span><br><span class="line">&#125; <span class="keyword">catch</span> (MyException e) &#123;</span><br><span class="line">  Log.warning(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>源头思考全部可能性，内部的问题不抛给别人</li>
<li>不要试图忽略（隐藏）错误，每次出错都是优化代码（反思自己局限）的好机会。否则，你终将付出代价。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-动画" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/18/周精益分享-动画/" class="article-date">
  	<time datetime="2015-11-18T10:30:00.000Z" itemprop="datePublished">2015-11-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/18/周精益分享-动画/">周精益分享 - 动画</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Android_L动画_-_吴明">Android L动画  - 吴明</h2><ul>
<li>Touch feedback（触摸反馈）<ul>
<li>波纹有边界</li>
<li>波纹超出边界</li>
<li>波纹颜色</li>
</ul>
</li>
<li>Reveal effect（揭露效果）</li>
<li>liecap<ul>
<li>Circular Reveal动画</li>
</ul>
</li>
<li>Activity transitions（Activity转换效果）<ul>
<li>Enter（进入）<ul>
<li>普通Transition<ul>
<li>explode：从场景的中心移入或移出 </li>
<li>slide：从场景的边缘移入或移出 </li>
<li>fade：调整透明度产生渐变效果</li>
</ul>
</li>
<li>Shared Elements Transition 共享元素转换:共享两个                acitivity中共同的元素<ul>
<li>changeBounds -  改变目标视图的布局边界</li>
<li>changeClipBounds - 裁剪目标视图边界</li>
<li>changeTransform - 改变目标视图的缩放比例和旋转角度        changeImageTransform - 改变目标图片的大小和缩放比例</li>
</ul>
</li>
</ul>
</li>
<li>Exit（退出）</li>
<li><a href="http://pan.baidu.com/s/1o6Kngnw" target="_blank" rel="external">demo地址</a><br><img src="http://7xn0ue.com1.z0.glb.clouddn.com/Untitled123.gif" alt="Markdown preferences pane"></li>
</ul>
</li>
</ul>
<h2 id="objectorAnimator_动画_王进">objectorAnimator 动画  王进</h2><h3 id="动画类型">动画类型</h3><ul>
<li>View Animation(Tween Animation 补间动画)<br>只能支持简单的缩放、平移、旋转、透明度等基本的动画，且有一定的局限性<br>动画时View的真正的View的属性保持不变，实际位置未改变<br>原理：提供动画的起始和结束状态信息，中间的状态根据上述类里差值器算法填充</li>
<li>Drawable Animation（Frame Animation 帧动画）</li>
<li>Property Animation(属性动画)<br>它更改的是对象的实际属性，</li>
</ul>
<h3 id="Property_Animation属性">Property Animation属性</h3><ul>
<li>Duration：动画的持续时间</li>
<li>TimeInterpolation：属性值的计算方式，如先快后慢</li>
<li>TypeEvaluator：根据属性的开始、结束值与TimeInterpolation计算出的因子计算出当前时间的属性值</li>
<li>Repeat Count and behavoir：重复次数与方式，如播放3次、5次、无限循环，可以此动画一直重复，或播放完时再反向播放</li>
<li>Animation sets：动画集合，即可以同时对一个对象应用几个动画，这些动画可以同时播放也可以对不同动画设置不同开始偏移</li>
<li>Frame refreash delay：多少时间刷新一次，即每隔多少时间计算一次属性值，默认为10ms，最终刷新时间还受系统进程调度与硬件的影响</li>
</ul>
<h3 id="Property_Animation_动画流程">Property Animation 动画流程</h3><p><img src="http://pic002.cnblogs.com/images/2011/168097/2011120119191590.png" alt=""></p>
<h3 id="ValueAnimator">ValueAnimator</h3><p>ValueAnimator包含Property Animation动画的所有核心功能，如动画时间，开始、结束属性值，相应时间属性值计算方法等。应用Property Animation有两个步聚：</p>
<ol>
<li>计算属性值</li>
<li>根据属性值执行相应的动作，如改变对象的某一属性。（需要在onAnimationUpdate中传入执行动画的对象）<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ValueAnimator animation = ValueAnimator.ofFloat<span class="params">(<span class="number">0</span>f, <span class="number">1</span>f)</span>;</span><br><span class="line">animation.setDuration<span class="params">(<span class="number">1000</span>)</span>;</span><br><span class="line">animation.addUpdateListener<span class="params">(new AnimatorUpdateListener<span class="params">()</span> &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onAnimationUpdate<span class="params">(ValueAnimator animation)</span> &#123;</span><br><span class="line">        Log.i<span class="params">(<span class="string">"update"</span>, <span class="params">(<span class="params">(Float)</span> animation.getAnimatedValue<span class="params">()</span>)</span>.toString<span class="params">()</span>)</span>;</span><br><span class="line">        //这个函数中会传入ValueAnimator对象做为参数，通过这个ValueAnimator对象的getAnimatedValue<span class="params">()</span>函数可以得到当前的属性值</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span>;</span><br><span class="line">animation.setInterpolator<span class="params">(new CycleInterpolator<span class="params">(<span class="number">3</span>)</span>)</span>;</span><br><span class="line">animation.start<span class="params">()</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="ObjectAnimator">ObjectAnimator</h3><p>ObjectAnimator继承自ValueAnimator，要指定一个对象及该对象的一个属性,例如</p>
<ul>
<li>常用方法有ofFloat()，ofInt()，ofObject()，ofArgb()，ofPropertyValuesHolder()。</li>
<li><p>属性动画可用的属性<br>答案是：任何一切带有set开头的方法属性名字。可能我们常用的有：</p>
<ul>
<li>平移 translationX，translationY, X，Y。 </li>
<li>缩放 scaleX，scaleY。 </li>
<li>旋转 rotationX， rotationY。</li>
<li>透明度 alpha。</li>
</ul>
<p>也就是说我们所有控件都有以上setTranslationX(),setScaleX(),setRotationX(),setAlpha()等方法。<br>我们不仅限于这几个属性，就拿TextView控件来说，只要是TextView有的属性都可以用来实现动画效果，比如 字体大小：“textColor”，字体颜色“textSize”等。</p>
<blockquote>
<p>限制：对象应该有一个setter函数：set<propertyname>（驼峰命名法）及要有相应属性的getter方法：get<propertyname><br>且应返回值类型应与相应的setter方法的参数类型一致。<br>如果上述条件不满足，则不能用ObjectAnimator，应用ValueAnimator代替。</propertyname></propertyname></p>
</blockquote>
</li>
</ul>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ObjectAnimator animator = ObjectAnimator.ofFloat<span class="params">(imageView, 'alpha', <span class="number">1.0</span>f, <span class="number">0.3</span>f, <span class="number">1.0</span>F)</span>;</span><br><span class="line">       animator.setDuration<span class="params">(<span class="number">2000</span>)</span>;<span class="comment">//动画时间</span></span><br><span class="line">       animator.setInterpolator<span class="params">(new BounceInterpolator<span class="params">()</span>)</span>;<span class="comment">//动画插值</span></span><br><span class="line">       animator.setRepeatCount<span class="params">(-<span class="number">1</span>)</span>;<span class="comment">//设置动画重复次数</span></span><br><span class="line">       animator.setRepeatMode<span class="params">(ValueAnimator.RESTART)</span>;<span class="comment">//动画重复模式</span></span><br><span class="line">       animator.setStartDelay<span class="params">(<span class="number">1000</span>)</span>;<span class="comment">//动画延时执行</span></span><br><span class="line">       animator.start<span class="params">()</span>;<span class="comment">//启动动画</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据应用动画的对象或属性的不同，可能需要在onAnimationUpdate函数中调用invalidate()函数刷新视图。</p>
</blockquote>
<h3 id="组合动画">组合动画</h3><ul>
<li><p><strong>组合动画1–AnimatorSet的使用</strong><br>这个类提供了一个play()方法，如果我们向这个方法中传入一个Animator对象(ValueAnimator或ObjectAnimator)将会返回一个AnimatorSet.Builder的实例，AnimatorSet.Builder中包括以下四个方法：</p>
<ul>
<li>after(Animator anim) 将现有动画插入到传入的动画之后执行</li>
<li>after(long delay) 将现有动画延迟指定毫秒后执行</li>
<li>before(Animator anim) 将现有动画插入到传入的动画之前执行</li>
<li>with(Animator anim) 将现有动画和传入的动画同时执行</li>
</ul>
<blockquote>
<p>Android 除了提供play(),还有playSequentially(),playTogether() 可供使用，可传入一个或者多个动画对象（，隔开），或者动画集合</p>
</blockquote>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ObjectAnimator animator = ObjectAnimator.ofInt(container, <span class="string">"backgroundColor"</span>, <span class="number">0xFFFF0000</span>, <span class="number">0xFFFF00FF</span>);</span><br><span class="line">             ObjectAnimator animator1 = ObjectAnimator.ofFloat(view, <span class="string">"translationX"</span>, <span class="number">0.0f</span>, <span class="number">200.0f</span>, <span class="number">0f</span>);</span><br><span class="line">             ObjectAnimator animator2 = ObjectAnimator.ofFloat(view, <span class="string">"scaleX"</span>, <span class="number">1.0f</span>, <span class="number">2.0f</span>);</span><br><span class="line">             ObjectAnimator animator3 = ObjectAnimator.ofFloat(view, <span class="string">"rotationX"</span>, <span class="number">0.0f</span>, <span class="number">90.0f</span>, <span class="number">0.0F</span>);</span><br><span class="line">             ObjectAnimator animator4 = ObjectAnimator.ofFloat(view, <span class="string">"alpha"</span>, <span class="number">1.0f</span>, <span class="number">0.2f</span>, <span class="number">1.0F</span>);</span><br><span class="line"></span><br><span class="line">             <span class="comment">//组合动画方式1</span></span><br><span class="line">             AnimatorSet <span class="built_in">set</span> = <span class="keyword">new</span> AnimatorSet();</span><br><span class="line">            ((<span class="built_in">set</span>.play(animator).with(animator1).before(animator2)).before(animator3)).after(animator4);</span><br><span class="line">             <span class="built_in">set</span>.setDuration(<span class="number">5000</span>);</span><br><span class="line">             <span class="built_in">set</span>.start();</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>组合动画2–PropertyValuesHolder的使用</strong><br>使用方法ObjectAnimator.ofPropertyValuesHolder(Object target,PropertyValuesHolder… values)；第一个参数是动画的目标对象，之后的参数是PropertyValuesHolder类的实例，可以有多个这样的实例。代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PropertyValuesHolder valuesHolder = PropertyValuesHolder.ofFloat(<span class="string">"translationX"</span>, <span class="number">0.0f</span>, <span class="number">300.0f</span>);</span><br><span class="line">                PropertyValuesHolder valuesHolder1 = PropertyValuesHolder.ofFloat(<span class="string">"scaleX"</span>, <span class="number">1.0f</span>, <span class="number">1.5f</span>);</span><br><span class="line">                PropertyValuesHolder valuesHolder2 = PropertyValuesHolder.ofFloat(<span class="string">"rotationX"</span>, <span class="number">0.0f</span>, <span class="number">90.0f</span>, <span class="number">0.0F</span>);</span><br><span class="line">                PropertyValuesHolder valuesHolder3 = PropertyValuesHolder.ofFloat(<span class="string">"alpha"</span>, <span class="number">1.0f</span>, <span class="number">0.3f</span>, <span class="number">1.0F</span>);</span><br><span class="line"></span><br><span class="line">                ObjectAnimator objectAnimator = ObjectAnimator.ofPropertyValuesHolder(view, valuesHolder, valuesHolder1, valuesHolder2, valuesHolder3);</span><br><span class="line">                objectAnimator.setDuration(<span class="number">2000</span>).start();</span><br><span class="line">                <span class="comment">//类似于AnimatorSet.playTogether(Animator... items);</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>组合动画3-ViewPropertyAnimator（多属性动画）</strong></p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ViewPropertyAnimator animator5 = imageView.animate<span class="params">()</span>;</span><br><span class="line">animator5.translationX<span class="params">(<span class="number">200</span>)</span>.scaleX<span class="params">(<span class="number">2</span>)</span>.setDuration<span class="params">(<span class="number">2000</span>)</span>.start<span class="params">()</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意：使用ViewPropertyAnimator类需要API&gt;=12</p>
</blockquote>
<h3 id="动画监听">动画监听</h3><ul>
<li>animator.addListener(new Animator.AnimatorListener(){});//监听动画开始，结束，取消，重复（四种都包括）</li>
<li>animator.addListener(new  AnimatorListenerAdapter(){});<br>推荐，可代替AnimatorListener，需要监听动画开始，结束，取消，重复那种就直接实现那种方法就行<br>其实AnimatorListenerAdapter的源码只是一个实现了AnimatorListener接口的抽象类而已</li>
<li>animator.addUpdateListener(new  ValueAnimator.AnimatorUpdateListener(){});<br>更加精确的方法来时刻监听当前动画的执行情况，可以读取到动画的每个更新值了<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">animator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</span><br><span class="line">            @<span class="function">Override</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span>(<span class="params">ValueAnimator animation</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">float</span> <span class="keyword">value</span> = (<span class="keyword">float</span>) animation.getAnimatedValue();</span><br><span class="line">                <span class="comment">//可以根据自己的需要来获取动画更新值。</span></span><br><span class="line">                Log.e(<span class="string">'TAG'</span>, <span class="string">'the animation value is '</span> + <span class="keyword">value</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Keyframes">Keyframes</h3><p>keyFrame是一个 时间/值 对，通过它可以定义一个在特定时间的特定状态，即关键帧，而且在两个keyFrame之间可以定义不同的Interpolator，就好像多个动画的拼接，第一个动画的结束点是第二个动画的开始点。KeyFrame是抽象类，要通过ofInt(),ofFloat(),ofObject()获得适当的KeyFrame，然后通过PropertyValuesHolder.ofKeyframe获得PropertyValuesHolder对象，如以下例子：<br><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">*   动画效果：btn对象的width属性值使其：</span><br><span class="line">*   开始时 Width=400</span><br><span class="line">*   动画开始1/4时 Width=200</span><br><span class="line">*   动画开始1/2时 Width=400</span><br><span class="line">*   动画开始3/4时 Width=100</span><br><span class="line">*   动画结束时 Width=500</span><br><span class="line">*/</span></span><br><span class="line">Keyframe kf0 = Keyframe.ofInt<span class="params">(<span class="number">0</span>, <span class="number">400</span>)</span>;</span><br><span class="line">Keyframe kf1 = Keyframe.ofInt<span class="params">(<span class="number">0.25</span>f, <span class="number">200</span>)</span>;</span><br><span class="line">Keyframe kf2 = Keyframe.ofInt<span class="params">(<span class="number">0.5</span>f, <span class="number">400</span>)</span>;</span><br><span class="line">Keyframe kf4 = Keyframe.ofInt<span class="params">(<span class="number">0.75</span>f, <span class="number">100</span>)</span>;</span><br><span class="line">Keyframe kf3 = Keyframe.ofInt<span class="params">(<span class="number">1</span>f, <span class="number">500</span>)</span>;</span><br><span class="line">PropertyValuesHolder pvhRotation = PropertyValuesHolder.ofKeyframe<span class="params">(<span class="string">"width"</span>, kf0, kf1, kf2, kf4, kf3)</span>;</span><br><span class="line">ObjectAnimator rotationAnim = ObjectAnimator.ofPropertyValuesHolder<span class="params">(btn2, pvhRotation)</span>;</span><br><span class="line">rotationAnim.setDuration<span class="params">(<span class="number">2000</span>)</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="Property_Animation在XML中使用">Property Animation在XML中使用</h3><ul>
<li><p>xml文件放在res/animator/中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">set</span> <span class="attribute">xmlns:android</span>=<span class="value">'http://schemas.android.com/apk/res/android'</span></span><br><span class="line">    <span class="attribute">android:duration</span>=<span class="value">'2000'</span></span><br><span class="line">    <span class="attribute">android:ordering</span>=<span class="value">'sequentially'</span>&gt;</span><span class="comment">&lt;!--动画执行顺序 sequentially：顺序执行；together：同时执行。 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">objectAnimator</span></span><br><span class="line">        <span class="attribute">android:propertyName</span>=<span class="value">'translationX'</span></span><br><span class="line">        <span class="attribute">android:valueFrom</span>=<span class="value">'0'</span></span><br><span class="line">        <span class="attribute">android:valueTo</span>=<span class="value">'200'</span></span><br><span class="line">        <span class="attribute">android:valueType</span>=<span class="value">'floatType'</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">set</span> <span class="attribute">android:ordering</span>=<span class="value">'together'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">objectAnimator</span></span><br><span class="line">            <span class="attribute">android:propertyName</span>=<span class="value">'scaleX'</span></span><br><span class="line">            <span class="attribute">android:valueFrom</span>=<span class="value">'1'</span></span><br><span class="line">            <span class="attribute">android:valueTo</span>=<span class="value">'2'</span></span><br><span class="line">            <span class="attribute">android:valueType</span>=<span class="value">'floatType'</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">objectAnimator</span></span><br><span class="line">            <span class="attribute">android:propertyName</span>=<span class="value">'rotationX'</span></span><br><span class="line">            <span class="attribute">android:valueFrom</span>=<span class="value">'0'</span></span><br><span class="line">            <span class="attribute">android:valueTo</span>=<span class="value">'90'</span></span><br><span class="line">            <span class="attribute">android:valueType</span>=<span class="value">'floatType'</span> /&gt;</span><span class="comment">&lt;!--动画值的类型--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="title">set</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>通过AnimatorInflater.loadAnimator方法加载xml动画返回一个Animator的对象，然后调用setTarget方法给动画设置对象调用哪个start启动动画即可完成xml动画效果</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Animator animator = AnimatorInflater.loadAnimator(context, R.animator.anim_file)<span class="comment">;</span></span><br><span class="line">animator.setTarget(view)<span class="comment">;  </span></span><br><span class="line">animator.start()<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="花花绿绿的ProgressBar_杨俊构">花花绿绿的ProgressBar  杨俊构</h2><p><em>参考<a href="http://www.runoob.com/w3cnote/android-tutorial-progressbar.html" target="_blank" rel="external">Android 基础入门教程</a></em></p>
<ul>
<li>ProgressBar(进度条)是Android基本UI控件，ProgressBar的应用场景很多，比如 用户登录时，后台在发请求，以及等待服务器返回信息，这个时候会用到进度条；或者当在进行一些比较 耗时的操作，需要等待一段较长的时间，这个时候如果没有提示，用户可能会以为程序Carsh或者手机死机 了，这样会大大降低用户体验，所以在需要进行耗时操作的地方，添加上进度条，让用户知道当前的程序 在执行中，也可以直观的告诉用户当前任务的执行进度等！使用进度条可以给我带来这样的便利！ </li>
</ul>
<ul>
<li>ProgressBar<a href="http://androiddoc.qiniudn.com/reference/android/widget/ProgressBar.html" target="_blank" rel="external">官方API文档</a>，ProgressBar继承与View类，直接子类有AbsSeekBar和ContentLoadingProgressBar， 其中AbsSeekBar的子类有SeekBar和RatingBar，可见这二者也是基于ProgressBar实现的</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/46760225.jpg" alt=""></p>
<ul>
<li>常用属性详解：</li>
</ul>
<blockquote>
<ul>
<li>android:max：进度条的最大值</li>
<li>android:progress：进度条已完成进度值</li>
<li>android:progressDrawable：设置轨道对应的Drawable对象</li>
<li>android:indeterminate：如果设置成true，则进度条不精确显示进度</li>
<li>android:indeterminateDrawable：设置不显示进度的进度条的Drawable对象</li>
<li>android:indeterminateDuration：设置不精确显示进度的持续时间</li>
<li>android:secondaryProgress：二级进度条，类似于视频播放的一条是当前播放进度，一条是缓冲进度，前者通过progress属性进行设置！</li>
</ul>
</blockquote>
<ul>
<li>对应的再Java中我们可调用下述方法：</li>
</ul>
<blockquote>
<ul>
<li>getMax()：返回这个进度条的范围的上限</li>
<li>getProgress()：返回进度</li>
<li>getSecondaryProgress()：返回次要进度</li>
<li>incrementProgressBy(int diff)：指定增加的进度</li>
<li>isIndeterminate()：指示进度条是否在不确定模式下</li>
<li>setIndeterminate(boolean indeterminate)：设置不确定模式下</li>
</ul>
</blockquote>
<ul>
<li>系统默认进度条使用实例：</li>
</ul>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/34906854.jpg" alt=""></p>
<h3 id="耀眼的IOS的ProgressBar_，参看开源中国IOS代码库">耀眼的IOS的ProgressBar ，参看<a href="http://www.oschina.net/ios/codingList/373/ios-progress" target="_blank" rel="external">开源中国IOS代码库</a></h3><h3 id="圆形进度条">圆形进度条</h3><blockquote>
<p>网上一个简单的自定义圆形进度条！代码还是比较简单，容易理解，有兴趣可以看看，或者进行相关扩展~</p>
</blockquote>
<p><img src="http://7xohph.com1.z0.glb.clouddn.com/17272953.jpg" alt=""></p>
<ul>
<li>实现代码：自定义View类：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by Jay on 2015/8/5 0005.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CirclePgBar</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Paint mBackPaint;</span><br><span class="line">    <span class="keyword">private</span> Paint mFrontPaint;</span><br><span class="line">    <span class="keyword">private</span> Paint mTextPaint;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mStrokeWidth = <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mHalfStrokeWidth = mStrokeWidth / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mRadius = <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">private</span> RectF mRect;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mProgress = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//目标值，想改多少就改多少</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTargetProgress = <span class="number">90</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mMax = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mWidth;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mHeight;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CirclePgBar</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CirclePgBar</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CirclePgBar</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//完成相关参数初始化</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mBackPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mBackPaint.setColor(Color.WHITE);</span><br><span class="line">        mBackPaint.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">        mBackPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        mBackPaint.setStrokeWidth(mStrokeWidth);</span><br><span class="line"></span><br><span class="line">        mFrontPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mFrontPaint.setColor(Color.GREEN);</span><br><span class="line">        mFrontPaint.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">        mFrontPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        mFrontPaint.setStrokeWidth(mStrokeWidth);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        mTextPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mTextPaint.setColor(Color.GREEN);</span><br><span class="line">        mTextPaint.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">        mTextPaint.setTextSize(<span class="number">80</span>);</span><br><span class="line">        mTextPaint.setTextAlign(Paint.Align.CENTER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写测量大小的onMeasure方法和绘制View的核心方法onDraw()</span></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">        mWidth = getRealSize(widthMeasureSpec);</span><br><span class="line">        mHeight = getRealSize(heightMeasureSpec);</span><br><span class="line">        setMeasuredDimension(mWidth, mHeight);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">        initRect();</span><br><span class="line">        <span class="keyword">float</span> angle = mProgress / (<span class="keyword">float</span>) mMax * <span class="number">360</span>;</span><br><span class="line">        canvas.drawCircle(mWidth / <span class="number">2</span>, mHeight / <span class="number">2</span>, mRadius, mBackPaint);</span><br><span class="line">        canvas.drawArc(mRect, -<span class="number">90</span>, angle, <span class="keyword">false</span>, mFrontPaint);</span><br><span class="line">        canvas.drawText(mProgress + <span class="string">"%"</span>, mWidth / <span class="number">2</span> + mHalfStrokeWidth, mHeight / <span class="number">2</span> + mHalfStrokeWidth, mTextPaint);</span><br><span class="line">        <span class="keyword">if</span> (mProgress &lt; mTargetProgress) &#123;</span><br><span class="line">            mProgress += <span class="number">1</span>;</span><br><span class="line">            invalidate();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRealSize</span><span class="params">(<span class="keyword">int</span> measureSpec)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> mode = MeasureSpec.getMode(measureSpec);</span><br><span class="line">        <span class="keyword">int</span> size = MeasureSpec.getSize(measureSpec);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (mode == MeasureSpec.AT_MOST || mode == MeasureSpec.UNSPECIFIED) &#123;</span><br><span class="line">            <span class="comment">//自己计算</span></span><br><span class="line">            result = (<span class="keyword">int</span>) (mRadius * <span class="number">2</span> + mStrokeWidth);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result = size;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initRect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mRect == <span class="keyword">null</span>) &#123;</span><br><span class="line">            mRect = <span class="keyword">new</span> RectF();</span><br><span class="line">            <span class="keyword">int</span> viewSize = (<span class="keyword">int</span>) (mRadius * <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">int</span> left = (mWidth - viewSize) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> top = (mHeight - viewSize) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> right = left + viewSize;</span><br><span class="line">            <span class="keyword">int</span> bottom = top + viewSize;</span><br><span class="line">            mRect.set(left, top, right, bottom);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>然后在布局文件中加上：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">com.jay.progressbardemo.CirclePgBar</span></span><br><span class="line">     <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">  <span class="attribute">android:layout_height</span>=<span class="value">"match_parent"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="总结">总结</h3><ul>
<li>progressbar是Android中的常用控件，在实际开发中和动画结合较多，好的进度条可以缓解使用者焦躁的情趣，自定义圆形进度条可以自行完善，然后用到实际开发中！</li>
</ul>
<h2 id="layer-list实现阴影效果——xpleemoon">layer-list实现阴影效果——xpleemoon</h2><ul>
<li><p>为控件实现阴影效果，可以有多种方式：</p>
<ul>
<li>多个drawable层叠在一起（不好的实现是多个View层叠达到多个drawable的层叠效果，相对好的实现是在同一个View钟实现多个drawable的层叠）</li>
<li>自定义view</li>
<li>Material Design中设置Z轴的方式</li>
</ul>
</li>
<li><p>本文的思路是多个drawable叠在一起，但是不额外使用View，通过layer-list可以将多个item按照顺序层叠在一起显示。首先来看效果图：</p>
</li>
</ul>
<p><img src="https://github.com/xpleemoon/layer-list-shadow-demo/blob/master/gif/LayerShadow.gif?raw=true" alt="LayerShadow"></p>
<ul>
<li><p>第一个和第二个控件是用来展示layer-list实现阴影效果的基本款，而第三个控件是综合上述两个控件效果，再集合selector实现的。</p>
</li>
<li><p>默认状态：</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">layer-list</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 阴影：左偏移2dp，上偏移4dp --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:left</span>=<span class="value">"2dp"</span></span><br><span class="line">        <span class="attribute">android:top</span>=<span class="value">"4dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">solid</span> <span class="attribute">android:color</span>=<span class="value">"@android:color/holo_blue_dark"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">corners</span> <span class="attribute">android:radius</span>=<span class="value">"10dp"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">item</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 前景：：底偏移4dp，右偏移2dp --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:bottom</span>=<span class="value">"4dp"</span></span><br><span class="line">        <span class="attribute">android:right</span>=<span class="value">"2dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">solid</span> <span class="attribute">android:color</span>=<span class="value">"@android:color/holo_blue_bright"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">corners</span> <span class="attribute">android:radius</span>=<span class="value">"10dp"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>点击状态：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">layer-list</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 为了达到点击的真实感，将原来默认状态的前景色设置为阴影，并将前景设为无透明--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:left</span>=<span class="value">"2dp"</span></span><br><span class="line">        <span class="attribute">android:top</span>=<span class="value">"4dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">solid</span> <span class="attribute">android:color</span>=<span class="value">"@android:color/holo_blue_bright"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">corners</span> <span class="attribute">android:radius</span>=<span class="value">"10dp"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:bottom</span>=<span class="value">"4dp"</span></span><br><span class="line">        <span class="attribute">android:right</span>=<span class="value">"2dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">corners</span> <span class="attribute">android:radius</span>=<span class="value">"10dp"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>layer-list的item可以通过以下属性设置偏移量：</p>
<ul>
<li>android:top 顶部的偏移量</li>
<li>android:bottom 底部的偏移量</li>
<li>android:left 左边的偏移量</li>
<li>android:right 右边的偏移量</li>
</ul>
</blockquote>
<ul>
<li>selector，使用上述layer-list：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">selector</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span> <span class="attribute">android:drawable</span>=<span class="value">"@drawable/layer_list_btn_pressed"</span> <span class="attribute">android:state_pressed</span>=<span class="value">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span> <span class="attribute">android:drawable</span>=<span class="value">"@drawable/layer_list_btn_pressed"</span> <span class="attribute">android:state_selected</span>=<span class="value">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span> <span class="attribute">android:drawable</span>=<span class="value">"@drawable/layer_list_btn"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">selector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>最后再来看下，布局代码：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">LinearLayout</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attribute">xmlns:tools</span>=<span class="value">"http://schemas.android.com/tools"</span></span><br><span class="line">    <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">    <span class="attribute">android:layout_height</span>=<span class="value">"match_parent"</span></span><br><span class="line">    <span class="attribute">android:orientation</span>=<span class="value">"vertical"</span></span><br><span class="line">    <span class="attribute">android:paddingBottom</span>=<span class="value">"@dimen/activity_vertical_margin"</span></span><br><span class="line">    <span class="attribute">android:paddingLeft</span>=<span class="value">"@dimen/activity_horizontal_margin"</span></span><br><span class="line">    <span class="attribute">android:paddingRight</span>=<span class="value">"@dimen/activity_horizontal_margin"</span></span><br><span class="line">    <span class="attribute">android:paddingTop</span>=<span class="value">"@dimen/activity_vertical_margin"</span></span><br><span class="line">    <span class="attribute">tools:context</span>=<span class="value">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"100dp"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"50dp"</span></span><br><span class="line">        <span class="attribute">android:background</span>=<span class="value">"@drawable/layer_list_btn"</span></span><br><span class="line">        <span class="attribute">android:clickable</span>=<span class="value">"true"</span></span><br><span class="line">        <span class="attribute">android:gravity</span>=<span class="value">"center"</span></span><br><span class="line">        <span class="attribute">android:text</span>=<span class="value">"默认状态"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"100dp"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"50dp"</span></span><br><span class="line">        <span class="attribute">android:layout_marginTop</span>=<span class="value">"@dimen/activity_vertical_margin"</span></span><br><span class="line">        <span class="attribute">android:background</span>=<span class="value">"@drawable/layer_list_btn_pressed"</span></span><br><span class="line">        <span class="attribute">android:clickable</span>=<span class="value">"true"</span></span><br><span class="line">        <span class="attribute">android:gravity</span>=<span class="value">"center"</span></span><br><span class="line">        <span class="attribute">android:text</span>=<span class="value">"点击状态"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"100dp"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"50dp"</span></span><br><span class="line">        <span class="attribute">android:layout_marginTop</span>=<span class="value">"@dimen/activity_vertical_margin"</span></span><br><span class="line">        <span class="attribute">android:background</span>=<span class="value">"@drawable/selector_btn"</span></span><br><span class="line">        <span class="attribute">android:clickable</span>=<span class="value">"true"</span></span><br><span class="line">        <span class="attribute">android:gravity</span>=<span class="value">"center"</span></span><br><span class="line">        <span class="attribute">android:text</span>=<span class="value">"点我"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>第一个和第二个TextView分别引用了对应的layer-list（默认和点击）作为背景，第三个引用了selector</p>
</li>
<li><p><strong><em><a href="https://github.com/xpleemoon/layer-list-shadow-demo" target="_blank" rel="external">源码地址</a></em></strong></p>
</li>
</ul>
<h2 id="零部署的云服务_-_王胜">零部署的云服务 - 王胜</h2><blockquote>
<p>本周的分享主题是动画，但之前7月份我已经分享过一次，<a href="http://51offer.github.io/2015/07/07/%E7%A7%BB%E5%8A%A8%E7%BB%84%E5%91%A8%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-%E7%9F%A5%E5%85%B6%E6%89%80%E4%BB%A5%E7%84%B6/" target="_blank" rel="external">知其所以然</a> 。再加上前面几位已经对android的动画介绍的很完整了，所以我就分享另一个话题『云平台下的零部署开发网站』。</p>
</blockquote>
<h3 id="牵扯的技能">牵扯的技能</h3><ul>
<li>Git</li>
<li>任何一门后端开发语言</li>
</ul>
<h3 id="搭建步骤">搭建步骤</h3><p><a href="https://tryappservice.azure.com/zh-cn" target="_blank" rel="external">AZURE</a> -&gt; 点击 <a href="https://azure.microsoft.com/zh-cn/services/app-service/web/" target="_blank" rel="external">Web应用模块</a> -&gt; 选择语言，点击<strong>创建Web应用</strong> -&gt; 选择模板，点击<strong>创建</strong>，至此，应用以创建，点击页面上站点url，就能看到新创建的Web站点了。</p>
<h3 id="修改代码，Git提交自动完成部署">修改代码，Git提交自动完成部署</h3><p>复制创建成功页面『使用 Git 克隆或推送』里的Git地址，将初始化源码clone到本地，然后编辑代码，修改功能。完成后，直接push到远程，云平台自动完成部署。再看看网页是不是已经发生变化了。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Victors-MPB:azure wangsheng$ git clone https://$4f743e5d-0ee0-4-231-b9ee:WSc8Szx4Rf30apo3Ky7hpw6mXAadAZYvn1zagCvMaboj7mHFyJ2vzuYn9i12@4f743e5d-0ee0-4-231-b9ee.scm.azurewebsites.net/4f743e5d-0ee0-4-231-b9ee.git&#10;Cloning into &#39;4f743e5d-0ee0-4-231-b9ee&#39;...&#10;remote: Counting objects: 4, done.&#10;remote: Compressing objects: 100% (3/3), done.&#10;remote: Total 4 (delta 0), reused 0 (delta 0)&#10;Unpacking objects: 100% (4/4), done.&#10;Checking connectivity... done.&#10;Victors-MPB:azure wangsheng$ ls&#10;4f743e5d-0ee0-4-231-b9ee&#10;Victors-MPB:azure wangsheng$ cd 4f743e5d-0ee0-4-231-b9ee/&#10;Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git br&#10;* master&#10;Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git log&#10;commit cf6edda65210ef7254f9bc545c778489f123620e&#10;Author: windowsazure &#60;windowsazure&#62;&#10;Date:   Fri Nov 20 03:53:00 2015 +0000&#10;&#10;    Initial Commit&#10;Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ ls&#10;favicon.ico&#9;index.php&#10;Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ vi index.php&#10;Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git st&#10;On branch master&#10;Your branch is up-to-date with &#39;origin/master&#39;.&#10;Changes not staged for commit:&#10;  (use &#34;git add &#60;file&#62;...&#34; to update what will be committed)&#10;  (use &#34;git checkout -- &#60;file&#62;...&#34; to discard changes in working directory)&#10;&#10;&#9;modified:   index.php&#10;&#10;no changes added to commit (use &#34;git add&#34; and/or &#34;git commit -a&#34;)&#10;Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git diff&#10;diff --git a/index.php b/index.php&#10;&#60;?php&#10;index 712f825..50a17e7 100644&#10;--- a/index.php&#10;+++ b/index.php&#10;@@ -1,3 +1,4 @@&#10; &#60;?php&#10;     echo &#34;Hello World&#34;&#10;-?&#62;&#10;\ No newline at end of file&#10;+    echo &#34;hack it.&#34;&#10;+?&#62;&#10;Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git ci -am &#34;add one line.&#34;&#10;[master 6c5551f] add one line.&#10; 1 file changed, 2 insertions(+), 1 deletion(-)&#10;Victors-MPB:4f743e5d-0ee0-4-231-b9ee wangsheng$ git push origin master&#10;Counting objects: 3, done.&#10;Delta compression using up to 4 threads.&#10;Compressing objects: 100% (3/3), done.&#10;Writing objects: 100% (3/3), 324 bytes | 0 bytes/s, done.&#10;Total 3 (delta 0), reused 0 (delta 0)&#10;remote: Updating branch &#39;master&#39;.&#10;remote: Updating submodules.&#10;remote: Preparing deployment for commit id &#39;6c5551f090&#39;.&#10;remote: Generating deployment script.&#10;remote: Generating deployment script for Web Site&#10;remote: Generated deployment script files&#10;remote: Running deployment command...&#10;remote: Handling Basic Web Site deployment.&#10;remote: Finished successfully.&#10;remote: Deployment successful.</span><br></pre></td></tr></table></figure>
<p>对，后端开发可以如此简单快乐地开发部署！！！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-Swift入门专题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/13/周精益分享-Swift入门专题/" class="article-date">
  	<time datetime="2015-11-13T10:30:00.000Z" itemprop="datePublished">2015-11-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/13/周精益分享-Swift入门专题/">周精益分享 - Swift入门专题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Swift初见_—_张超耀">Swift初见 — 张超耀</h2><h3 id="宏">宏</h3><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in objective-c, but in swift, #define can't be used any more  </span></span><br><span class="line"><span class="comment">// use let keyword to define a macro, look up original document:  </span></span><br><span class="line">/*  </span><br><span class="line">Simple Macros  </span><br><span class="line">Where you typically used the #define directive <span class="keyword">to</span> define a primitive constant <span class="keyword">in</span> C <span class="keyword">and</span> Objective-C, <span class="keyword">in</span> Swift you <span class="keyword">use</span> a <span class="keyword">global</span> constant instead. For example, the constant definition #define FADE_ANIMATION_DURATION <span class="number">0.35</span> can be better expressed <span class="keyword">in</span> Swift <span class="keyword">with</span> <span class="keyword">let</span> FADE_ANIMATION_DURATION = <span class="number">0.35</span>. Because simple constant-like macros map directly <span class="keyword">to</span> Swift <span class="keyword">global</span> variables, the compiler automatically imports simple macros defined <span class="keyword">in</span> C <span class="keyword">and</span> Objective-C source files.  </span><br><span class="line">*/  </span><br><span class="line"><span class="comment">// in objective-c  </span></span><br><span class="line"><span class="comment">// #define kCommonAPI @"http://<span class="doctag"><span class="keyword">xxx</span></span><span class="doctag"><span class="keyword">xxx</span></span>x"  </span></span><br><span class="line"><span class="comment">// but in swift, no #define, just use let to define  </span></span><br><span class="line"><span class="keyword">let</span> kCommonAPI = <span class="string">"http://xxxxxxx"</span></span><br></pre></td></tr></table></figure>
<h3 id="注释_&amp;_分号">注释 &amp; 分号</h3><ul>
<li>在Swift中，注释跟C/OC语言中的注释很像，但最大的不同点就是在Swift中多行注释可以嵌套</li>
</ul>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 这是单行注释  </span><br><span class="line">  </span><br><span class="line">/<span class="keyword">*</span> 这也是注释，但是多行注释   </span><br><span class="line">  /<span class="keyword">*</span>多行注释在swift中是可以嵌套的<span class="keyword">*</span>/  </span><br><span class="line">  /<span class="keyword">*</span>原官方指导教程上说嵌套多行注释可以快速、简单地把大的代码块分成多块来注释 <span class="keyword">*</span>/  </span><br><span class="line"><span class="keyword">*</span>/</span><br></pre></td></tr></table></figure>
<ul>
<li>与其它开发语言不同的时，swift是不要求写分号的，当然如果想写，也是可以的。当你想把多个语句写到同一行时，这种情况下就一定要使用分号来隔开不同的语句了</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dog = <span class="string">"a gog"</span> <span class="comment">// 可以不添加分号  </span></span><br><span class="line"><span class="keyword">let</span> cat = <span class="string">"a cat"</span>; <span class="built_in">print</span>(cat)<span class="comment">// 除了最后一条语句可以不添加分号外，其它都需要添加分号来隔开  </span></span><br><span class="line"><span class="keyword">let</span> catTwo = <span class="string">"two cats"</span>; <span class="keyword">let</span> name = <span class="string">"Jobs"</span>; <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> has <span class="subst">\(catTwos)</span>"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="类型转换">类型转换</h3><ul>
<li>Swift不会像C、OC那样自动<strong>隐式转换</strong>类型，所以我们需要手动进行类型转换 </li>
</ul>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> twoThousand: UInt16 = <span class="number">2000</span>   </span><br><span class="line"><span class="comment">// one是UInt8类型  </span></span><br><span class="line"><span class="built_in">let</span> one: UInt8 = <span class="number">1</span>  </span><br><span class="line"><span class="comment">// twoThousand是UInt16类型，one是UInt8类型，如果要执行相加，那么就需要进行类型转换   </span></span><br><span class="line"><span class="comment">// 否则会报错的。  </span></span><br><span class="line"><span class="built_in">let</span> twoThousandAndOne = twoThousand + UInt16<span class="params">(one)</span> </span><br><span class="line"></span><br><span class="line"><span class="built_in">*</span><span class="built_in">*</span> 浮点值转换成整型时，会截尾<span class="built_in">*</span><span class="built_in">*</span></span><br></pre></td></tr></table></figure>
<h3 id="类型别名(Typealias)">类型别名(Typealias)</h3><ul>
<li>类型别名也就是给已经存在的类型起一个别名。定义类型别名是使用关键字typealias。 类型别名一般是为了让开发者更容易看出变量或者常量的类型或者是更好地归类某一个模块中需要使用到的类型，让开发者见名知意。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面是给UInt16起一个别名，叫mySample  </span></span><br><span class="line"><span class="comment">// 然后就可以在其它地方使用这个mySample声明变量或者常量  </span></span><br><span class="line">typealias mySample = UInt16  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 由于前面已经定义了类型别名，那么这里使用AudioSample也相当于使用UInt16  </span></span><br><span class="line">所以mySample<span class="class">.min</span> = UInt16<span class="class">.min</span>,也就是<span class="number">0</span> </span><br><span class="line"><span class="tag">var</span> maxAmplitudeFound = mySample.min</span><br></pre></td></tr></table></figure>
<h3 id="“?”_和_“!”">“?” 和 “!”</h3><ul>
<li>Swift语言使用var定义变量，但和别的语言不同，Swift里不会自动给变量赋初始值， 也就是说变量不会有默认值，所以要求使用变量之前必须要对其初始化<br>。如果在使用变量之前不进行初始化就会报错.</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stringValue : <span class="type">String</span>?</span><br><span class="line">stringValue = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"<span class="subst">\(stringValue)</span>"</span>)</span><br><span class="line"><span class="keyword">let</span> hashValue = stringValue?.hashValue</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这就是optional, strValue自动得到默认值：nil</span></span><br><span class="line"><span class="comment">// 这个nil跟Objective-C中的nil不同，不是指针，而是表示值不存在。</span></span><br><span class="line"><span class="keyword">var</span> strValue: <span class="type">String</span>?</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断optional是否有值</span></span><br><span class="line"><span class="keyword">if</span> (strValue != <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="comment">// do what you need to do here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="下期预告">下期预告</h2><h3 id="深度理解Swift的”?”和”!”">深度理解Swift的”?”和”!”</h3><h3 id="Swift之断言">Swift之断言</h3><h3 id="浅谈Swift的closure">浅谈Swift的closure</h3><h2 id="Dubbo_上手_—_陈奎">Dubbo 上手 — 陈奎</h2><h2 id="『图像和滤镜』_-_图像选择器">『图像和滤镜』 - 图像选择器</h2><p><code>我们可以使用以下常规的图像获取方式</code></p>
<p><img src="./Simulator Screen Shot Nov 12, 2015, 8.11.12 PM.png" alt="Alt text"></p>
<p><code>图库与相册</code></p>
<p><img src="./Simulator Screen Shot Nov 12, 2015, 8.16.30 PM.png" alt="Alt text"></p>
<h4 id="系统自带">系统自带</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">touchesBegan</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> sheet = <span class="type">UIAlertController</span>(title: <span class="string">"图片选择"</span>, message: <span class="string">"简单版的三种选择"</span>, preferredStyle: .<span class="type">ActionSheet</span>)</span><br><span class="line">    <span class="comment">// 判断设备是否支持相机（iPod &amp; Simulator）</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="type">UIImagePickerController</span>.isSourceTypeAvailable(.<span class="type">Camera</span>)) &#123;</span><br><span class="line">        sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"Camera"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.showPhotoes(.<span class="type">Camera</span>)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"PhotoLibrary"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.showPhotoes(.<span class="type">PhotoLibrary</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"SavedPhotosAlbum"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.showPhotoes(.<span class="type">SavedPhotosAlbum</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"Cancel"</span>, style: .<span class="type">Cancel</span>, handler: <span class="literal">nil</span>))</span><br><span class="line">    presentViewController(sheet, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">showPhotoes</span><span class="params">(source: UIImagePickerControllerSourceType)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> controller = <span class="type">UIImagePickerController</span>()</span><br><span class="line">    controller.delegate = <span class="keyword">self</span></span><br><span class="line">    controller.sourceType = source</span><br><span class="line">    controller.allowsEditing = source == .<span class="type">SavedPhotosAlbum</span> ? <span class="literal">true</span>:<span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.presentViewController(controller, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>UIImagePickerController的代理</code><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">imagePickerControllerDidCancel</span><span class="params">(picker: UIImagePickerController)</span></span> &#123;</span><br><span class="line">    dismissViewControllerAnimated(<span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 非常坑，这个方法废弃了但代码提示只有它</span></span><br><span class="line"><span class="comment">//	func imagePickerController(picker: UIImagePickerController, didFinishPickingImage image: UIImage, editingInfo: [String : AnyObject]?) &#123;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject])</span></span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="info字典介绍"><a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/#//apple_ref/doc/constant_group/Editing_Information_Keys" target="_blank" rel="external">info字典介绍</a></h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImagePickerControllerMediaType</span>: String</span><br><span class="line"><span class="built_in">UIImagePickerControllerOriginalImage</span>: <span class="built_in">UIImage</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerEditedImage</span>: <span class="built_in">UIImage</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerCropRect</span>: <span class="built_in">NSValue</span> -&gt; <span class="built_in">CGRect</span></span><br><span class="line"><span class="comment">// MediaURL只为视频提供</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerMediaURL</span>:  <span class="built_in">NSURL</span></span><br><span class="line"><span class="comment">// LivePhoto是一张图片，保留那个moment的前后动作和声音</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerLivePhoto</span>: String</span><br><span class="line"><span class="comment">// 摄像摄影时返回media的信息字典</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerMediaMetadata</span>: <span class="built_in">NSDictionary</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SavedPhotosAlbum 的 info 示例</span></span><br><span class="line"></span><br><span class="line">▿ 5 elements</span><br><span class="line">  ▿ [0] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerCropRect"</span></span><br><span class="line"></span>  ▿ [1] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerOriginalImage"</span></span><br><span class="line"></span>  ▿ [2] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerReferenceURL"</span></span><br><span class="line"></span>    -<span class="ruby"> .<span class="number">1</span> <span class="symbol">:</span> assets-<span class="symbol">library:</span>/<span class="regexp">/asset/asset</span>.<span class="constant">JPG</span>?id=<span class="number">99</span>D53A1F-<span class="constant">FEEF</span>-<span class="number">40</span>E1-<span class="number">8</span>BB3-<span class="number">7</span>DD55A43C8B7&amp;ext=<span class="constant">JPG</span></span><br><span class="line"></span>  ▿ [3] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerMediaType"</span></span><br><span class="line"></span>    -<span class="ruby"> .<span class="number">1</span> <span class="symbol">:</span> public.image</span><br><span class="line"></span>  ▿ [4] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerEditedImage"</span></span></span><br></pre></td></tr></table></figure>
<h3 id="自定义">自定义</h3><p><img src="./1447343597718.png" alt="Alt text"></p>
<p>遍历相册的所有图片<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AssetsLibrary.framework</span></span><br><span class="line"><span class="comment">// ALAssetsLibrary 的使用,但是它慢慢的被放弃了</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">loadLocalPhotoes</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">var</span> countOne = <span class="number">0</span></span><br><span class="line">        <span class="comment">//ALAssetsGroupSavedPhotos表示只读取相机胶卷（ALAssetsGroupAll则读取全部相簿）</span></span><br><span class="line">        assetsLibrary.enumerateGroupsWithTypes(<span class="type">ALAssetsGroupSavedPhotos</span>, usingBlock: &#123;</span><br><span class="line">            (group: <span class="type">ALAssetsGroup</span>!, stop) <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"is goin"</span>)</span><br><span class="line">            <span class="keyword">if</span> group != <span class="literal">nil</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> assetBlock : <span class="type">ALAssetsGroupEnumerationResultsBlock</span> = &#123;</span><br><span class="line">                    (result: <span class="type">ALAsset</span>!, index: <span class="type">Int</span>, stop) <span class="keyword">in</span></span><br><span class="line">                    <span class="keyword">if</span> result != <span class="literal">nil</span> &#123;</span><br><span class="line">                        <span class="keyword">self</span>.assets.append(result)</span><br><span class="line">                        countOne++</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                group.enumerateAssetsUsingBlock(assetBlock)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"assets:<span class="subst">\(countOne)</span>"</span>)</span><br><span class="line">                <span class="keyword">self</span>.startChangeLocalImages(<span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;, failureBlock: &#123; (fail) <span class="keyword">in</span></span><br><span class="line">                <span class="built_in">print</span>(fail)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 展现本地图片</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">startChangeLocalImages</span><span class="params">(<span class="keyword">var</span> index: Int)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> index==assets.<span class="built_in">count</span> &#123;</span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> myAsset = assets[index]</span><br><span class="line">        <span class="keyword">let</span> image = <span class="type">UIImage</span>(<span class="type">CGImage</span>:myAsset.thumbnail().takeUnretainedValue())</span><br><span class="line">        <span class="keyword">self</span>.backImageView.image = image</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> popTime = dispatch_time(<span class="type">DISPATCH_TIME_NOW</span>, <span class="type">Int64</span>(<span class="number">1</span> * <span class="type">Double</span>(<span class="type">NSEC_PER_SEC</span>)))</span><br><span class="line">        dispatch_after(popTime, dispatch_get_main_queue()) &#123;</span><br><span class="line">            <span class="keyword">self</span>.startChangeLocalImages(index+<span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>iOS9 开始使用新库<br><a href="https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/index.html" target="_blank" rel="external">PHPhotoLibrary</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-周精益分享-装逼指南二期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/04/周精益分享-装逼指南二期/" class="article-date">
  	<time datetime="2015-11-04T10:30:00.000Z" itemprop="datePublished">2015-11-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/04/周精益分享-装逼指南二期/">周精益分享 - 程序员装逼指南二期</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Android_单元测试_吴明">Android 单元测试  吴明</h2><ul>
<li><a href="https://developer.android.com/intl/zh-cn/training/activity-testing/preparing-activity-testing.html" target="_blank" rel="external">Android单元测试支持</a><ul>
<li>Android studio 1.2 beta3版本，原生支持单元测试</li>
</ul>
</li>
<li>环境搭建 <ul>
<li>配置环境命令：./gradlew build connectedCheck  </li>
</ul>
</li>
<li>测试示例    <ul>
<li><img src="http://7xn0ue.com1.z0.glb.clouddn.com/420E036F-4D69-47F4-A639-5A5B294F7BDD.png" alt="MacDown Screenshot"></li>
</ul>
</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyFirstTestActivityTest</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">ActivityInstrumentationTestCase2&lt;MyFirstTestActivity&gt;</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">MyFirstTestActivity</span> mFirstTestActivity;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">TextView</span> mFirstTestText;</span><br><span class="line"></span><br><span class="line">    public <span class="type">MyFirstTestActivityTest</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="type">MyFirstTestActivity</span>.<span class="keyword">class</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void setUp() <span class="keyword">throws</span> <span class="type">Exception</span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.setUp();</span><br><span class="line">        mFirstTestActivity = getActivity();</span><br><span class="line">        mFirstTestText =</span><br><span class="line">                (<span class="type">TextView</span>) mFirstTestActivity</span><br><span class="line">                .findViewById(<span class="type">R</span>.id.my_first_test_text_view);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ps:由于配置环境一直报:</li>
</ul>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Test <span class="property">running</span> failed: Instrumentation <span class="command">run</span> failed due <span class="keyword">to</span> 'java.lang.RuntimeException'</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/ui-testing/index.html" target="_blank" rel="external">Automating UI Tests</a></li>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/unit-testing/index.html" target="_blank" rel="external">Building Effective Unit Tests</a></li>
<li><a href="https://developer.android.com/intl/zh-cn/training/testing/performance.html" target="_blank" rel="external">Testing Display  Performance</a></li>
<li>问题：<ul>
<li>运行在模拟器上，通过对模拟器的操作或者mock，来触发函数调用，进而对其结果进行验证</li>
<li>测试的编写和维护较为困难</li>
</ul>
</li>
</ul>
<h2 id="Linux_文件权限入门_-_曾铭">Linux 文件权限入门 - 曾铭</h2><h3 id="一个线上_bug">一个线上 bug</h3><p>图片上传 API 无法使用，定位到问题是 dev1 帐号移动的 tomcat 无法访问 /home/img_temp 目录，处理权限问题后搞定</p>
<h3 id="基本概念">基本概念</h3><p>user, group, others</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">[dev1@apps-51offer ~]</span>$ ll</span><br><span class="line">total 16</span><br><span class="line">-rw-r--r-- 1 dev1 dev   742 Nov  5 11:22 ming.pub</span><br><span class="line">drwxrwx--- 4 root root 4096 Nov  6 09:30 test1</span><br><span class="line">drwxr-xr-- 2 dev1 dev  4096 Nov  6 10:44 test2</span><br><span class="line">drwxr-xr-x 2 dev1 dev  4096 Nov  6 09:30 test3</span><br></pre></td></tr></table></figure>
<ul>
<li>文件 <code>-</code></li>
<li>文件夹 <code>d</code></li>
<li>链接 <code>l</code></li>
</ul>
<p>rwx 读、写、执行权限 , 754 代表什么</p>
<ul>
<li>文件所有者变更：<code>chown ming:mobile file</code></li>
<li>文件权限变更： <code>chmod g+rx file</code></li>
</ul>
<h3 id="一个小坑">一个小坑</h3><h4 id="问：">问：</h4><blockquote>
<p><code>drwxr-xr-- 2 dev1 dev  4096 Nov  6 10:44 test2</code> 文件夹下有 <code>-rwxr-xr-- 2 root root  4096 Nov  6 10:44 file</code><br>dev1 用户可以删除 file 这个文件吗？</p>
</blockquote>
<h4 id="答：">答：</h4><blockquote>
<p>可以，文件的 rwx 控制文件本身的读写运行权限，文件的增删文件名的修改要看文件夹的权限。</p>
</blockquote>
<h2 id="Android_压力测试工具_Monkey&amp;MonkeyRunner-_杨俊构">Android 压力测试工具 Monkey&amp;MonkeyRunner- 杨俊构</h2><h3 id="Monkey">Monkey</h3><h4 id="一、Monkey_是什么？">一、Monkey 是什么？</h4><ul>
<li>Monkey 就是SDK中附带的一个工具。</li>
</ul>
<h4 id="二、Monkey_测试的目的？">二、Monkey 测试的目的？</h4><ul>
<li>该工具用于进行压力测试。 然后开发人员结合monkey 打印的日志 和系统打印的日志，结局测试中出现的问题。</li>
</ul>
<h4 id="三、Monkey_测试的特点？">三、Monkey 测试的特点？</h4><ul>
<li>Monkey 测试,所有的事件都是随机产生的，不带任何人的主观性。</li>
</ul>
<h4 id="四、Monkey_命令详解">四、Monkey 命令详解</h4><ul>
<li><p>标准的monkey 命令: [adb shell] monkey [options] <eventcount> ,</eventcount></p>
<blockquote>
<p> 例如：adb shell monkey -v 500 ————产生500次随机事件，</p>
</blockquote>
</li>
</ul>
<ul>
<li><p>四大类—— 常用选项 、 事件选项 、 约束选项 、 调试选项</p>
<blockquote>
<p>-v：指定打印信息的详细级别，一个 -v增加一个级别 ， 默认级别为 0 。</p>
<p>-s：指定产生随机事件种子值，相同的种子值产生相同的事件序列。如： -s 200</p>
<p>-p：指定有效的package（如不指定，则对系统中所有package有效），一个-p 对应一个有效package， 如：-p com.ckt -p com.ckt.asura；</p>
</blockquote>
</li>
</ul>
<h4 id="五、一个简单的monkey命令：">五、一个简单的monkey命令：</h4><ul>
<li><p>adb shell monkey -p com.xy.android.junit -s 500 -v 10000</p>
</li>
<li><p>但是，工作中为了保证测试数量的完整进行，我们一般不会在发生错误时立刻退出压力测试。</p>
</li>
<li><p>monkey 测试命令如下</p>
</li>
</ul>
<blockquote>
<p>adb shell monkey -p com.xy.android.junit -s 500 —ignore-crashes —ignore-timeouts —monitor-native-crashes -v -v 10000 &gt; E:\monkey_log\java_monkey_log.txt</p>
</blockquote>
<h3 id="MonkeyRunner">MonkeyRunner</h3><h4 id="一、什么是monkeyrunner">一、什么是monkeyrunner</h4><ul>
<li><p>monkeyrunner工具提供了一个API，使用此API写出的程序可以在Android代码之外控制Android设备和模拟器。通过monkeyrunner，您可以写出一个Python程序去安装一个Android应用程序或测试包，运行它，向它发送模拟击键，截取它的用户界面图片。</p>
</li>
<li><p>monkeyrunner工具的主要设计目的是用于测试功能/框架水平上的应用程序和设备，或用于运行单元测试套件，但您当然也可以将其用于其它目的。</p>
</li>
</ul>
<h4 id="二、monkeyrunner工具同Monkey工具的差别">二、monkeyrunner工具同Monkey工具的差别</h4><ul>
<li><p>Monkey： Monkey工具直接运行在设备或模拟器的adb shell中，生成用户或系统的伪随机事件流，属于黑盒测试。</p>
</li>
<li><p>monkeyrunner：monkeyrunner工具则是类似于灰盒测试的样子，可以编写定制一些测试方法和用例针对具体情况测试。</p>
</li>
</ul>
<h4 id="三、实例_：双11抽取优惠券不停点击一个按钮脚本">三、实例 ：双11抽取优惠券不停点击一个按钮脚本</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8 </span></span><br><span class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyRunner, MonkeyDevice, MonkeyImage</span><br><span class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyRunner <span class="keyword">as</span> mr</span><br><span class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyDevice <span class="keyword">as</span> md</span><br><span class="line"><span class="keyword">from</span> com.android.monkeyrunner <span class="keyword">import</span> MonkeyImage <span class="keyword">as</span> mi</span><br><span class="line">device=mr.waitForConnection()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>): </span><br><span class="line">	MonkeyRunner.sleep(<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">print</span> i</span><br><span class="line">	device.touch(<span class="number">500</span>,<span class="number">950</span>,<span class="string">'DOWN_AND_UP'</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"end"</span></span><br></pre></td></tr></table></figure>
<h2 id="人脸识别技术简单介绍-_王进">人脸识别技术简单介绍- 王进</h2><h4 id="Android自带的API:FaceDetector">Android自带的API:FaceDetector</h4><ul>
<li><p>Step 1: 读取bitmap图片（API 只接受Bitmap）</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bitmap sampleBmp=BitmapFactory.decodeResource<span class="params">(getResources<span class="params">()</span>, R.drawable.sample1)</span>;</span><br></pre></td></tr></table></figure>
<p>(拍照或者从相册中也可以)</p>
</li>
<li><p>Step 2: 通过FaceDetector API进行人脸识别</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//FaceDetecor只能读取RGB 565格式的Bitmap</span></span><br><span class="line">  Bitmap tmpBmp = inputImage.copy<span class="params">(Bitmap.Config.RGB_565, <span class="literal">true</span>)</span>;</span><br><span class="line">  <span class="comment">//新建FaceDetector 实例，</span></span><br><span class="line">  FaceDetector faceDet = new FaceDetector<span class="params">(tmpBmp.getWidth<span class="params">()</span>, tmpBmp.getHeight<span class="params">()</span>, MAX_FACES)</span>;<span class="comment">//MAX_FACES 搜索人脸个数</span></span><br><span class="line">  <span class="comment">// 调用findFaces方法，将数据储存在facelist中</span></span><br><span class="line">  FaceDetector.Face[] faceList = new FaceDetector.Face[MAX_FACES];</span><br><span class="line">faceDet.findFaces<span class="params">(tmpBmp, faceList)</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>找人脸的原理是：找眼睛。<br>它返回的人脸数据face中，<br>通过调用public float eyesDistance ()，得到眼距<br>public void getMidPoint (PointF point)，得到两眼中心点位置。<br>public float confidence () 可以返回该人脸数据的可信度(0~1)，这个值越大，该人脸数据的准确度也就越高</p>
</blockquote>
</li>
<li><p>Step3:对原图进行缩放，并在图上显示人脸框</p>
<ul>
<li>吐槽：<br>A，只能接受Bitmap 格式的数据；<br>B，只能识别双眼距离大于20 像素的人脸像（当然，这个可在framework层中修改）；<br>C，只能检测出人脸的位置（双眼的中心点及距离），不能对人脸进行匹配（查找指定的脸谱）。</li>
</ul>
</li>
</ul>
<h3 id="第三方Face++">第三方Face++</h3><ul>
<li>在线API：基础版API供免费调用测试和小规模使用（会尽力维护API服务稳定性，但不保证每次调用均会成功），企业版API相对基础版API在算法和稳定性方面会有更好的表现</li>
<li>离线SDK包括人脸关键点定位等功能。</li>
<li>网址：<a href="http://www.faceplusplus.com.cn/" target="_blank" rel="external">http://www.faceplusplus.com.cn/</a></li>
</ul>
<h2 id="Android启动模式之singelTask扫盲－_李仙鹏">Android启动模式之singelTask扫盲－ 李仙鹏</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-10-30-周精益分享-程序员装逼指南" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/30/2015-10-30-周精益分享-程序员装逼指南/" class="article-date">
  	<time datetime="2015-10-30T10:30:00.000Z" itemprop="datePublished">2015-10-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/2015-10-30-周精益分享-程序员装逼指南/">周精益分享 - 程序员装逼指南</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Android_单元测试">Android 单元测试</h2><h2 id="『图像和滤镜』">『图像和滤镜』</h2><p>@(Share)[UIImage]</p>
<p>[toc]</p>
<h3 id="图像">图像</h3><h4 id="常见的图像格式">常见的图像格式</h4><ul>
<li>png（Portable Network Graphic）便携式网络图形格式</li>
<li>tiff、tif（Tagged Image File Format）标记图像文件格式</li>
<li>jpg、jpeg（Joint Photographic Experts Group）联合摄影专家组</li>
<li>gif（Graphic Interchange Format）图形交换格式</li>
</ul>
<h4 id="图像实例化">图像实例化</h4><ul>
<li><p>imageNamed:</p>
<blockquote>
<p>使用频率高，内存缓存优化</p>
</blockquote>
</li>
<li><p>imageWithContentsOfFile:</p>
<blockquote>
<p>单次使用，暂时不清楚如何支持ImageAssert下的图片路径</p>
</blockquote>
</li>
<li><p>imageWithData:</p>
<blockquote>
<p>本地或网络的文件数据加载</p>
</blockquote>
</li>
<li><p>imageWithCGImage:</p>
<blockquote>
<p>绘制生成图，代码如下</p>
</blockquote>
</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旧图局部裁剪</span></span><br><span class="line">   <span class="built_in">CGImageRef</span> myImageRef = [oldImage <span class="built_in">CGImageRef</span>];</span><br><span class="line">   <span class="built_in">CGRect</span> subRect = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">   <span class="built_in">CGImageRef</span> cgCrop = <span class="built_in">CGImageCreateWithImageInRect</span>(myImageRef, subRect);</span><br><span class="line">   <span class="built_in">UIImage</span> *imageCrop = [<span class="built_in">UIImage</span> imageWith<span class="built_in">CGImage</span>:cgCrop];</span><br></pre></td></tr></table></figure>
<h4 id="显示图像">显示图像</h4><blockquote>
<p>屏幕的缩放因子，导致我们需要@2x及@3x图，对视图截图操作也同样需要针对Retina及plus优化<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UIImage</span>*)screenShotBy:(<span class="built_in">UIImageView</span>*)imagView</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//  UIGraphicsBeginImageContext(imagView.bounds.size);</span></span><br><span class="line"><span class="comment">// 2表示Retina，3表示plus分辨率，1正常，0则是当前设备的缩放因子</span></span><br><span class="line"><span class="comment">// YES 表示不包含图像的alpha通道</span></span><br><span class="line">	<span class="built_in">UIGraphicsBeginImageContextWithOptions</span>((imagView<span class="variable">.bounds</span><span class="variable">.size</span>), <span class="literal">YES</span>, <span class="number">2</span>);</span><br><span class="line">	[imagView<span class="variable">.layer</span> renderInContext:<span class="built_in">UIGraphicsGetCurrentContext</span>()];</span><br><span class="line">	<span class="built_in">UIImage</span>*image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</span><br><span class="line">	<span class="built_in">UIGraphicsEndImageContext</span>();</span><br><span class="line">	<span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="contentModel">contentModel</h5><p><em>图像内容展现方式</em></p>
<ul>
<li>UIViewContentModelScaleToFill（默认）</li>
<li>UIViewContentModelScaleAspectFill（下拉放大）</li>
<li>UIViewContentModelScaleAspectFit</li>
<li>UIViewContentModelCenter （一些停靠模式）</li>
<li>UIViewContentModelTop/Bottom</li>
<li>UIViewContentModelLeft/Right</li>
</ul>
<h5 id="拉伸属性">拉伸属性</h5><p><code>代码</code><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法一</span></span><br><span class="line">image=[oldIconImage <span class="string">stretchableImageWithLeftCapWidth:</span><span class="number">10</span> <span class="string">topCapHeight:</span><span class="number">12</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法二</span></span><br><span class="line">image = [oldIconImage <span class="string">resizableImageWithCapInsets:</span>UIEdgeInsetsMake(<span class="number">17</span>, <span class="number">17</span>, <span class="number">17</span>, <span class="number">25</span>)];</span><br></pre></td></tr></table></figure></p>
<p><code>ImageAssert</code></p>
<p><img src="./1446137205500.png" alt="Alt text"><br>使用slicing，小变大无视差<br><img src="./1446137161636.png" alt="Alt text"></p>
<hr>
<h3 id="图像选择器">图像选择器</h3><h4 id="系统自带">系统自带</h4><h4 id="自定义">自定义</h4><hr>
<h3 id="滤镜">滤镜</h3><h3 id="人脸识别">人脸识别</h3><h2 id="聊聊_QCon2015_-_曾铭">聊聊 QCon2015 - 曾铭</h2><h3 id="pure-native_移动跨平台架构设计与实战">pure-native 移动跨平台架构设计与实战</h3><p>by 赵世婚</p>
<h4 id="好处">好处</h4><ul>
<li>重复逻辑：网络层、账户逻辑</li>
<li>性能（网络压缩、打破内存限制）</li>
<li>多一层封装应对业务变动</li>
</ul>
<h4 id="坏处">坏处</h4><ul>
<li>跨平台开发代码生成</li>
<li>调试：异常捕获</li>
</ul>
<h4 id="总结：">总结：</h4><ul>
<li>学不来：人员构成决定技术选型，技术选型决定依赖人员 {:&amp;.rollIn}</li>
<li>分层来应对业务变动（横向分层和纵向分层）</li>
</ul>
<h3 id="JavaScript_-_The_World’s_Best_Programming_Language">JavaScript - The World’s Best Programming Language</h3><p>by Hax</p>
<h4 id="JavaScript_最好_？">JavaScript 最好 ？</h4><ul>
<li>语言简陋：弱类型、标准库、面向对象、模块、异步 {:&amp;.rollIn}</li>
<li>编程时注意：好的范式、不好的范式</li>
</ul>
<h4 id="不过">不过</h4><ul>
<li>npm 飞速发展的 packages 数量 {:&amp;.rollIn}</li>
<li>ECMAScript 6，语言特性问题完美解决 (c)</li>
<li>Babel 6to5 (python)<ul>
<li>most hard to upgrade -&gt; always use latest feature!</li>
</ul>
</li>
<li>最快的动态语言，还会更快 (ruby)</li>
<li>JS as a Platform：中间语言 (c#, java）</li>
<li>生态系统：浏览器、node.js、公司、社区</li>
</ul>
<h4 id="总结：-1">总结：</h4><ul>
<li>js 是现阶段发展最快的语言 {:&amp;.rollIn}</li>
<li>前端前途无量！</li>
</ul>
<h3 id="react">react</h3><h4 id="jQuery">jQuery</h4><ul>
<li>DOM 操作</li>
<li>组件散乱，社区力量难以聚合</li>
</ul>
<h4 id="AngularJS">AngularJS</h4><ul>
<li>绑定 数据与数据、数据与视图之间的关系</li>
<li>npm</li>
</ul>
<h4 id="React">React</h4><ul>
<li>用 js 写界面……（似乎是一种倒退）</li>
<li>还整个 JSX 让界面好写一点</li>
<li>React Native</li>
</ul>
<h4 id="总结">总结</h4><ul>
<li>前端风起云涌 {:&amp;.rollIn}</li>
<li>小扎灭我客户端之心不死</li>
</ul>
<h3 id="总的总结">总的总结</h3><ul>
<li>拥抱变化</li>
<li>最差也可以变最好，关键要敢于拥抱变化</li>
<li>技术紧迫感：勇于尝试新东西</li>
<li>业务紧迫感：技术改变留学</li>
</ul>
<h3 id="推荐：">推荐：</h3><ul>
<li>JavaScript - The World’s Best Programming Language</li>
<li>pure-native移动跨平台架构设计与实战</li>
<li>注重实效的性能</li>
<li>ReactJS 实战</li>
<li>ELE.ME是如何运行的</li>
</ul>
<h2 id="Android_6-0运行权限_-_王胜">Android 6.0运行权限 - 王胜</h2><h3 id="一般权限和危险权限">一般权限和危险权限</h3><p>Android 6.0以前，所有的权限在应用安装或者更新时自动完成授权。如果用户想安装这个App，必需接受所有的权限申请。为了保护用户的隐私，Android M特意调整了Android的授权架构。将应用权限分为一般(Normal)和危险(Dangerous)两种级别的权限:</p>
<ul>
<li><p>一般权限不会直接危害用户的隐私。如果你的App在manifest列出一般权限，那么系统会自动授予这些权限。</p>
</li>
<li><p>危险权限可以访问用户的隐私数据。 如果你的App在manifest列出一般权限，那么系统会自动授予这些权限。如果列出危险权限，需要通过用户显示交互通过你的应用权限申请。</p>
</li>
</ul>
<h3 id="权限组">权限组</h3><p>Anroid系统里所有的危险权限都拥有所归属的权限组。如果设备运行在Android6.0(API level 23)，并且App的targetSdkVersion是23或者更高，当App请求危险权限时将会有以下表现：</p>
<ul>
<li><p>如果App请求manifest里声明的危险权限，并且App当前还没有获取任何权限组里的权限，系统将弹出一个描述App想要访问权限的对话框。但是对话框不会描述该权限属于哪个权限组。例如：App请求权限 <strong>READ_CONTACTS</strong>  ，系统对话框只显示App需要访问设备的联系人。如果用户授权通过，系统仅仅给App需要的权限。</p>
</li>
<li><p>如果App请求manifest里声明的危险权限，并且App已经用户该危险权限所在的权限组的权限，系统则直接授予此次请求的权限，而不需要用户手动交互。例如：如果App已经有先前的 <strong>READ_CONTACTS</strong> 权限，那么再请求 <strong>WRITE_CONTACTS</strong> 权限，系统则直接授予。</p>
</li>
</ul>
<blockquote>
<p>任何权限都有所归属的权限组，包括一般权限和App自定义的权限。然而，权限组只影响那些危险权限相关的用户体验。你可以忽略一般权限的权限组。</p>
</blockquote>
<p><strong>危险权限和权限组</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">权限组</th>
<th style="text-align:center">权限</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CALENDAR</td>
<td style="text-align:center"><ul><li>READ_CALENDAR</li><li>WRITE_CALENDAR</li></ul></td>
</tr>
<tr>
<td style="text-align:center">CAMERA</td>
<td style="text-align:center"><ul><li>CAMERA</li></ul></td>
</tr>
<tr>
<td style="text-align:center">CONTACTS</td>
<td style="text-align:center"><ul><li>READ_CONTACTS</li><li> WRITE_CONTACTS</li><li>GET_ACCOUNTS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">LOCATION</td>
<td style="text-align:center"><ul><li>ACCESS_FINE_LOCATION</li><li> ACCESS_COARSE_LOCATION</li></ul></td>
</tr>
<tr>
<td style="text-align:center">MICROPHONE</td>
<td style="text-align:center"><ul><li>RECORD_AUDIO</li></ul></td>
</tr>
<tr>
<td style="text-align:center">PHONE</td>
<td style="text-align:center"><ul><li>READ_PHONE_STATE</li><li>CALL_PHONE</li><li>READ_CALL_LOG</li><li>WRITE_CALL_LOG</li><li> ADD_VOICEMAIL</li><li>USE_SIP</li><li> PROCESS_OUTGOING_CALLS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">SENSORS</td>
<td style="text-align:center"><ul><li>BODY_SENSORS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">SMS</td>
<td style="text-align:center"><ul><li>SEND_SMS</li><li>RECEIVE_SMS</li><li> READ_SMS</li><li>RECEIVE_WAP_PUSH</li><li>RECEIVE_MMS</li></ul></td>
</tr>
<tr>
<td style="text-align:center">STORAGE</td>
<td style="text-align:center"><ul><li>READ_EXTERNAL_STORAGE</li><li> WRITE_EXTERNAL_STORAGE</li></ul></td>
</tr>
</tbody>
</table>
<h3 id="权限检测">权限检测</h3><p>Android的所有版本里，都需要将所需的一般权限和危险权限都声明在App的manifest里。然而这些声明在不同的系统版本和App的target SDK Level会有不同的影响:</p>
<ul>
<li><p>如果设备运行在Android 5.1或者更低，或者你的App target SDK是22或者更低：如果你在manifest里声明了危险权限，用户则不得不在安装App时给予授权；如果他们不授权，系统将不会安装此App。</p>
</li>
<li><p>如果设备运行在Android 6.0或者更高，或者你的App target SDK是23或者更高：App不仅需要在manifest里声明危险权限，而且App在运行时还需要在每次需要危险权限时发起请求。用户可以接受也可以拒绝权限申请，App也需要在用户拒绝危险权限申请时能长长运行。</p>
</li>
</ul>
<blockquote>
<p>注意：此处的权限处理只有App的target API level 23或者更高，而且运行在Android 6.0 (API level 23)或者更高的设备上才会如此。如果设备的中App的targetSdkVersion 是 22或者更低，系统则在安装或者更新App时自动授予危险权限。</p>
</blockquote>
<p><a href="http://developer.android.com/tools/support-library/index.html" target="_blank" rel="external">The Android Support Library</a>能很好地处理检测、请求和权限。Android 6.0 (API level 23) framework也提供了类似的方法。然而，使用support库能更简单一些，因为你不需要在调用方法之前检测android系统的版本。 </p>
<h3 id="发起权限申请请求">发起权限申请请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Here, this Activity is the current activity</span></span><br><span class="line"><span class="keyword">if</span> (ContextCompat.checkSelfPermission(thisActivity,</span><br><span class="line">                Manifest.permission.READ_CONTACTS)</span><br><span class="line">        != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Should we show an explanation?</span></span><br><span class="line">    <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,</span><br><span class="line">            Manifest.permission.READ_CONTACTS)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Show an expanation to the user *asynchronously* -- don't block</span></span><br><span class="line">        <span class="comment">// this thread waiting for the user's response! After the user</span></span><br><span class="line">        <span class="comment">// sees the explanation, try again to request the permission.</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// No explanation needed, we can request the permission.</span></span><br><span class="line"></span><br><span class="line">        ActivityCompat.requestPermissions(thisActivity,</span><br><span class="line">                <span class="keyword">new</span> String[]&#123;Manifest.permission.READ_CONTACTS&#125;,</span><br><span class="line">                MY_PERMISSIONS_REQUEST_READ_CONTACTS);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an</span></span><br><span class="line">        <span class="comment">// app-defined int constant. The callback method gets the</span></span><br><span class="line">        <span class="comment">// result of the request.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="处理权限请求结果">处理权限请求结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode,</span><br><span class="line">        String permissions[], <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (requestCode) &#123;</span><br><span class="line">        <span class="keyword">case</span> MY_PERMISSIONS_REQUEST_READ_CONTACTS: &#123;</span><br><span class="line">            <span class="comment">// If request is cancelled, the result arrays are empty.</span></span><br><span class="line">            <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span></span><br><span class="line">                &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// permission was granted, yay! Do the</span></span><br><span class="line">                <span class="comment">// contacts-related task you need to do.</span></span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// permission denied, boo! Disable the</span></span><br><span class="line">                <span class="comment">// functionality that depends on this permission.</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// other 'case' lines to check for other</span></span><br><span class="line">        <span class="comment">// permissions this app might request</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：每次需要权限时，都需要显示请求调用，即使你已经获得的同权限组的其他权限。另外，权限分组处理的机制在将来的Android发型版本中有可能更改。因此你的App不应该依赖所需的权限在或者不在同一个权限组里。</p>
</blockquote>
<p>参考：</p>
<ul>
<li><a href="http://developer.android.com/training/permissions/requesting.html" target="_blank" rel="external">Requesting Permissions at Run Time</a></li>
<li><a href="http://developer.android.com/training/permissions/best-practices.html" target="_blank" rel="external">Permissions Best Practices</a></li>
</ul>
<h2 id="Swift_Access_Control_-_潘君">Swift Access Control - 潘君</h2><p>(未完待续)</p>
<ul>
<li><p>三个级别</p>
<ul>
<li>Public</li>
<li>Internal</li>
<li><p>Private</p>
<p>大部分默认是internal</p>
</li>
</ul>
</li>
<li><p>可应用于</p>
<ul>
<li>Module<ul>
<li>application</li>
<li>framework</li>
</ul>
</li>
<li>source file<ul>
<li>properties</li>
<li>types</li>
<li>functions</li>
<li>and so on（苹果文档这个太二了）</li>
</ul>
</li>
</ul>
</li>
<li><p>准则</p>
<ul>
<li>public变量不能定义为internal或者private的类型</li>
<li>函数的访问权限不能高于参数和返回值</li>
</ul>
</li>
<li><p>应用场景</p>
<ul>
<li>Single-Target Apps    Internal</li>
<li>Frameworks  Public</li>
<li>Unit Test Targets      @testable<img src="./1446175520419.png" alt="Alt text"></li>
</ul>
</li>
</ul>
<ul>
<li><p>会级联影响 例如修饰了type 同时也会影响type的members</p>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePublicClass</span> &#123;          // <span class="title">explicitly</span> <span class="title">public</span> <span class="title">class</span></span></span><br><span class="line">    <span class="keyword">public</span> var somePublicProperty = <span class="number">0</span>    // explicitly <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">member</span></span></span><br><span class="line">    var someInternalProperty = <span class="number">0</span>         // implicitly internal <span class="class"><span class="keyword">class</span> <span class="title">member</span></span></span><br><span class="line">    <span class="keyword">private</span> func somePrivateMethod() &#123;&#125;  // explicitly <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">member</span></span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeInternalClass</span> &#123;               // <span class="title">implicitly</span> <span class="title">internal</span> <span class="title">class</span></span></span><br><span class="line">    var someInternalProperty = <span class="number">0</span>         // implicitly internal <span class="class"><span class="keyword">class</span> <span class="title">member</span></span></span><br><span class="line">    <span class="keyword">private</span> func somePrivateMethod() &#123;&#125;  // explicitly <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">member</span></span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SomePrivateClass</span> &#123;        // <span class="title">explicitly</span> <span class="title">private</span> <span class="title">class</span></span></span><br><span class="line">    var somePrivateProperty = <span class="number">0</span>          // implicitly <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">member</span></span></span><br><span class="line">    func somePrivateMethod() &#123;&#125;          // implicitly <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">member</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Function</p>
</li>
<li><p>Tuple</p>
<ul>
<li>取元素中访问level最小的为准</li>
<li>例如 （PrivateClass, InternalClass） 则取private</li>
</ul>
</li>
<li><p>Enumeration </p>
<ul>
<li>一样</li>
</ul>
</li>
<li><p>class</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">A</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> func <span class="title">someMethod</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">B</span>: <span class="title">A</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">override</span> <span class="keyword">internal</span> func <span class="title">someMethod</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 移动组团队
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>